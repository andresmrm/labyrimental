{"version":3,"sources":["webpack:///app.js","webpack:///./src/index.js","webpack:///./src/store.js","webpack:///./src/utils.js","webpack:///./src/interface.js","webpack:///./src/vision.js","webpack:///./src/audio.js","webpack:///./src/createAudios.js","webpack:///./src/game.js","webpack:///./src/movement.js","webpack:///./src/tutorial.js","webpack:///./assets/map/map.js","webpack:///./src/input.js","webpack:///./src/levels.js","webpack:///./src/loader.js","webpack:///./src/randPos.js","webpack:///./src/pages/cantsee.html","webpack:///./src/pages/controls.html","webpack:///./src/pages/credits.html","webpack:///./src/pages/end1.html","webpack:///./src/pages/history.html","webpack:///./src/pages/instrorstart.html","webpack:///./src/pages/instructions.html","webpack:///./src/pages/l2end1.html","webpack:///./src/pages/l2end2.html","webpack:///./src/pages/l2end3.html","webpack:///./src/pages/l2intro.html","webpack:///./src/pages/l2intro2.html","webpack:///./src/pages/l2intro3.html","webpack:///./src/pages/l2intro3a.html","webpack:///./src/pages/l2intro4.html","webpack:///./src/pages/l2intro5.html","webpack:///./src/pages/lost2.html","webpack:///./src/pages/mainmenu.html","webpack:///./src/pages/tut1a.html","webpack:///./src/pages/tut1b.html","webpack:///./src/pages/tut2a.html","webpack:///./src/pages/tut2b.html","webpack:///./src/pages/tut2c.html","webpack:///./src/pages/tut2d.html","webpack:///./src/pages/tut2xa.html","webpack:///./src/pages/tut2xb.html","webpack:///./src/pages/tut2xc.html","webpack:///./src/pages/tut3a.html","webpack:///./src/pages/tut3b.html","webpack:///./src/pages/tut4a.html","webpack:///./src/pages/tut4b.html","webpack:///./src/pages/tut5a.html","webpack:///./src/pages/tut5b.html","webpack:///./src/pages ^\\.\\/.*$"],"names":["webpackJsonp","module","exports","__webpack_require__","preload","_storeJs","state","game","load","audio","create","song","add","sound","setDecodedCallback","_gameJs","playSong","this","createdSounds","crossOrigin","setTimeout","_loaderJs","mainLoad","update","Phaser","Game","AUTO","Object","defineProperty","value","shrines","water","position","walkablePos","soundName","gain","color","earth","air","fire","level","direction","followed","presences","darkPresence","power","filters","tint","loadingVision","playIntro","currentSong","animateMove","tutorial","window","s","randInt","x","Math","floor","random","equalArrays","a1","a2","equal","i","textToPos","t","split","map","parseInt","posToText","pos","join","posDirToText","posDist","p1","p2","sqrt","pow","rotLeft","dir","directions","indexOf","rotRight","rot180","getBounds","obj","y","width","height","getDiv","outer","arguments","length","undefined","document","getElementById","setInterfaceBounds","bounds","val","index","style","padding","openPage","name","playSound","replace","showInterface","text","pages","innerHTML","playButtonSound","scrollTo","inter","zIndex","opacity","pointerEvents","hideInterface","hideLoadingScreen","el","parentNode","removeChild","req","keys","forEach","k","k2","setVision","isResize","move","newImg","image","_utilsJs","layers","back","r2","min","scale","setTo","zero_x","img","zero_y","bounds2","key","round","tween","tweenNew","to","front","h","w","alpha","start","onComplete","destroy","removeAll","r","_interfaceJs","onTap","inputEnabled","events","onInputUp","onSetVision","addEffect","effect","graphics","beginFill","drawRect","endFill","loadVision","cache","checkImageKey","signal","onFileComplete","resize","setGameSize","innerWidth","innerHeight","addEventListener","time","setListenerPos","context","listener","setPosition","audioMult","setAudioOri","_direction","_slicedToArray","z","setOrientation","setPannerPos","panner","_pos","addSound","soundGain","createPanner","panningModel","distanceModel","refDistance","maxDistance","rolloffFactor","gainNode","disconnect","connect","volume","createGain","masterGain","loop","play","sliceIterator","arr","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","TypeError","createCommonAudios","steps","allowMultiple","addMarker","assign","harp","harpStart","button","magic","magicNo","magicRequest","magicArrived","darkSpell","darkSong","rarr","end2","createPositionedAudios","shrine","_audioJs","presence","changePresenceSoundGain","darkPres","presenceName","mult","fadeInTime","stop","fadeIn","stopSong","fadeOutTime","isPlaying","fadeOut","touchedDarkPresence","won","lost","includes","_visionJs","checkFollowPresence","checkInShrine","interact","isInPresence","arrived","_createAudiosJs","_tutorialJs","checkTutorial","TUTORIAL_PHASES","callingPresence","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","p","_movementJs","changePresencePos","isInShrine","presenceArrived","returningPresence","newPower","changedPower","searchingShrine","setPower","splice","reduce","c","onStop","tweenTo","tweenBack","chain","openTutWhenInPresence","searchingPresence","cheatLevel1","cheatLevel2","cheats","l1","l2","_interopRequireDefault","__esModule","default","tryChangePos","newPos","_assetsMapMapJs2","oldPos","posSetter","tweenPos","changeDarkPresencePos","playerPos","fTouched","event","moved","rotated","rotatePlayer","console","log","onMoved","type","walk","store","extraName","_oldPos","ox","oy","oz","_newPos","nx","ny","nz","updateFunc","onUpdateCallback","initPlayerPos","_assetsMapMapJs","e","n","closeTutMsg","phase","startingGame","4_0_0","6_6_0","2_6_0","3_7_0","8_3_0","1_2_0","3_0_0","0_2_0","-1_7_0","3_4_0","6_7_0","6_4_0","1_8_0","1_0_0","8_6_0","6_3_0","4_4_0","8_8_0","6_5_0","5_1_0","3_2_0","0_7_0","7_0_0","4_3_0","7_7_0","2_2_0","7_2_0","4_1_0","1_1_0","2_1_0","2_5_0","8_2_0","2_4_0","8_4_0","0_5_0","1_4_0","6_1_0","0_1_0","5_2_0","1_7_0","1_5_0","2_3_0","3_6_0","4_6_0","0_8_0","5_7_0","9_0_0","3_1_0","8_9_0","4_8_0","5_4_0","0_0_0","4_2_0","3_8_0","5_0_0","7_6_0","2_8_0","8_7_0","2_7_0","0_-1_0","0_4_0","6_0_0","4_7_0","7_4_0","1_6_0","6_2_0","5_8_0","0_3_0","2_0_0","5_6_0","7_8_0","8_1_0","4_5_0","0_6_0","8_0_0","8_5_0","1_3_0","7_1_0","6_8_0","initKeyboardInput","fMove","fInteract","_this","cursors","input","keyboard","addKey","Keyboard","onDown","SPACEBAR","initMouseInput","manager","pointer","_getBounds","_getBounds2","ix","iy","iw","ih","ty","by","lx","rx","fadeGame","fadeTime","wonLevel1","fadeOutPositionalSounds","introLevel1","startLevel","introLevel2","localStorage","lastLevel","_randPosJs","randomizePresencePositions","wonLevel2","lostLevel2","darkPresencePhrases","loadLevel","intro","createdFilters","gray","checkTut","pickLevel","onLoadStart","onLoadComplete","mainInit","firstImg","script","stage","backgroundColor","group","filter","_inputJs","getItem","_levelsJs","player_pos","possible_pos","array_pos","deleteCube","failed","remainingAttempts","remaining_pos","center","radius","_center","xc","yc","zc","j","webpackContext","webpackContextResolve","Error","./cantsee.html","./controls.html","./credits.html","./end1.html","./history.html","./instrorstart.html","./instructions.html","./l2end1.html","./l2end2.html","./l2end3.html","./l2intro.html","./l2intro2.html","./l2intro3.html","./l2intro3a.html","./l2intro4.html","./l2intro5.html","./lost2.html","./mainmenu.html","./tut1a.html","./tut1b.html","./tut2a.html","./tut2b.html","./tut2c.html","./tut2d.html","./tut2xa.html","./tut2xb.html","./tut2xc.html","./tut3a.html","./tut3b.html","./tut4a.html","./tut4b.html","./tut5a.html","./tut5b.html","resolve","id"],"mappings":"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,EAAAC,QAAA;;;ArBkpDM,SAASD,EAAQC,GsBlpDvBD,EAAAC,QAAA;;;AtB2pDM,SAASD,EAAQC,GuB3pDvBD,EAAAC,QAAA;;;AvBoqDM,SAASD,EAAQC,GwBpqDvBD,EAAAC,QAAA;;;AxB6qDM,SAASD,EAAQC,GyB7qDvBD,EAAAC,QAAA;;;AzBsrDM,SAASD,EAAQC,G0BtrDvBD,EAAAC,QAAA;;;A1B+rDM,SAASD,EAAQC,G2B/rDvBD,EAAAC,QAAA;;;A3BwsDM,SAASD,EAAQC,G4BxsDvBD,EAAAC,QAAA;;;A5BitDM,SAASD,EAAQC,G6BjtDvBD,EAAAC,QAAA;;;A7B0tDM,SAASD,EAAQC,G8B1tDvBD,EAAAC,QAAA;;;A9BmuDM,SAASD,EAAQC,G+BnuDvBD,EAAAC,QAAA;;;A/B4uDM,SAASD,EAAQC,GgC5uDvBD,EAAAC,QAAA;;;AhCqvDM,SAASD,EAAQC,GiCrvDvBD,EAAAC,QAAA;;;AjC8vDM,SAASD,EAAQC,GkC9vDvBD,EAAAC,QAAA;;;AlCuwDM,SAASD,EAAQC,GmCvwDvBD,EAAAC,QAAA;;;AnCgxDM,SAASD,EAAQC,GoChxDvBD,EAAAC,QAAA;;;ApCyxDM,SAASD,EAAQC,GqCzxDvBD,EAAAC,QAAA;;;ArCkyDM,SAASD,EAAQC,GsClyDvBD,EAAAC,QAAA;;;AtC2yDM,SAASD,EAAQC,GuC3yDvBD,EAAAC,QAAA;;;AvCozDM,SAASD,EAAQC,GwCpzDvBD,EAAAC,QAAA;;;AxC6zDM,SAASD,EAAQC,GyC7zDvBD,EAAAC,QAAA;;;AzCs0DM,SAASD,EAAQC,G0Ct0DvBD,EAAAC,QAAA;;;A1C+0DM,SAASD,EAAQC,G2C/0DvBD,EAAAC,QAAA;;;A3Cw1DM,SAASD,EAAQC,G4Cx1DvBD,EAAAC,QAAA;;;A5Ci2DM,SAASD,EAAQC,G6Cj2DvBD,EAAAC,QAAA;;;A7C02DM,SAASD,EAAQC,G8C12DvBD,EAAAC,QAAA;;;A9Cm3DM,SAASD,EAAQC,G+Cn3DvBD,EAAAC,QAAA;;;A/C43DM,SAASD,EAAQC,GgD53DvBD,EAAAC,QAAA,4HhDi4DQ;;;AAKF,SAASD,EAAQC,EAASC,GiDn2DhC,QAAAue,GAAAhX,GACA,MAAAvH,GAAAwe,EAAAjX,IAEA,QAAAiX,GAAAjX,GACA,MAAAtD,GAAAsD,IAAA,WAAiC,SAAAkX,OAAA,uBAAAlX,EAAA,SAvCjC,GAAAtD,IACAya,iBAAA,GACAC,kBAAA,GACAC,iBAAA,GACAC,cAAA,GACAC,iBAAA,GACAC,sBAAA,GACAC,sBAAA,GACAC,gBAAA,GACAC,gBAAA,GACAC,gBAAA,GACAC,iBAAA,GACAC,kBAAA,GACAC,kBAAA,GACAC,mBAAA,GACAC,kBAAA,GACAC,kBAAA,GACAC,eAAA,GACAC,kBAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,gBAAA,GACAC,gBAAA,GACAC,gBAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GACAC,eAAA,GAQAnC,GAAA/W,KAAA,WACA,MAAAhG,QAAAgG,KAAAvD,IAEAsa,EAAAoC,QAAAnC,EACA1e,EAAAC,QAAAwe,EACAA,EAAAqC,GAAA","file":"app.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t// ---------------------------------------------------------\n\t// Copyright (C) 2016  Andrés M. R. Martano\n\t//\n\t//     This program is free software: you can redistribute it and/or modify\n\t// it under the terms of the GNU Affero General Public License as\n\t// published by the Free Software Foundation, either version 3 of the\n\t// License, or (at your option) any later version.\n\t//\n\t//     This program is distributed in the hope that it will be useful,\n\t// but WITHOUT ANY WARRANTY; without even the implied warranty of\n\t// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n\t// GNU Affero General Public License for more details.\n\t//\n\t//     You should have received a copy of the GNU Affero General Public License\n\t// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n\t// ---------------------------------------------------------\n\t\n\t'use strict';\n\t\n\tvar _loaderJs = __webpack_require__(/*! ./loader.js */ 31);\n\t\n\tvar _gameJs = __webpack_require__(/*! ./game.js */ 14);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tfunction preload() {\n\t    //state.game.stage.disableVisibilityChange = true\n\t\n\t    _storeJs.state.game.load.audio('song', ['assets/audio/song.ogg']);\n\t}\n\t\n\tfunction create() {\n\t    var song = _storeJs.state.game.add.audio('song', 1, true);\n\t    _storeJs.state.game.sound.setDecodedCallback([song], function () {\n\t        return (0, _gameJs.playSong)('song');\n\t    }, this);\n\t    _storeJs.state.game.createdSounds = { song: song };\n\t\n\t    _storeJs.state.game.load.crossOrigin = 'anonymous';\n\t\n\t    // TODO: mainLoad needs to be called via setTimeout, no idea why...\n\t    // If called directly loader stops in the middle.\n\t    // mainLoad()\n\t    setTimeout(_loaderJs.mainLoad, 10);\n\t}\n\t\n\tfunction update() {}\n\t\n\t_storeJs.state.game = new Phaser.Game(0, 0, Phaser.AUTO, 'app', { preload: preload,\n\t    create: create,\n\t    update: update });\n\n/***/ },\n/* 1 */\n/*!**********************!*\\\n  !*** ./src/store.js ***!\n  \\**********************/\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\tvar shrines = {\n\t    water: {\n\t        position: [10, 0, 0],\n\t        walkablePos: [9, 0, 0],\n\t        soundName: 'stream',\n\t        gain: 15,\n\t        // color: 0x0000ff,\n\t        color: 0x00376e\n\t    },\n\t    earth: {\n\t        position: [8, 10, 0],\n\t        walkablePos: [8, 9, 0],\n\t        soundName: 'earth',\n\t        gain: 2,\n\t        // color: 0xa16020,\n\t        color: 0x376e00\n\t    },\n\t    air: {\n\t        position: [0, -2, 0],\n\t        walkablePos: [0, -1, 0],\n\t        soundName: 'wind',\n\t        gain: 4,\n\t        // color: 0xaaaaaa,\n\t        color: 0x3a0371\n\t    },\n\t    fire: {\n\t        position: [-2, 7, 0],\n\t        walkablePos: [-1, 7, 0],\n\t        soundName: 'fire',\n\t        gain: 4,\n\t        // color: 0xff0000,\n\t        color: 0x6e3700\n\t    }\n\t};\n\t\n\texports.shrines = shrines;\n\tvar state = {\n\t    state: 'pregame',\n\t    level: 1,\n\t    position: [4, 4, 0],\n\t    direction: 'e',\n\t    followed: [],\n\t    presences: {},\n\t    darkPresence: {},\n\t    power: [],\n\t    filters: [],\n\t    tint: null,\n\t    // if is waiting the load of an image for the vision\n\t    loadingVision: false,\n\t    // if should play intro or skip it\n\t    playIntro: true,\n\t    // current playing or last played song\n\t    currentSong: null,\n\t    // if should animate player moves\n\t    animateMove: false,\n\t    tutorial: 1\n\t};\n\t\n\texports.state = state;\n\t// Debug TODO: remover?\n\twindow.s = state;\n\n/***/ },\n/* 2 */,\n/* 3 */\n/*!**********************!*\\\n  !*** ./src/utils.js ***!\n  \\**********************/\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.randInt = randInt;\n\texports.equalArrays = equalArrays;\n\texports.textToPos = textToPos;\n\texports.posToText = posToText;\n\texports.posDirToText = posDirToText;\n\texports.posDist = posDist;\n\texports.rotLeft = rotLeft;\n\texports.rotRight = rotRight;\n\texports.rot180 = rot180;\n\texports.getBounds = getBounds;\n\tvar directions = ['n', 'e', 's', 'w'];\n\t\n\t// Return a random int from 0 to x-1\n\t\n\tfunction randInt(x) {\n\t    return Math.floor(Math.random() * x);\n\t}\n\t\n\t// Check if two arrays have the same numbers in the same order\n\t\n\tfunction equalArrays(a1, a2) {\n\t    var equal = true;\n\t    for (var i in a1) {\n\t        if (a1[i] != a2[i]) {\n\t            equal = false;\n\t            break;\n\t        }\n\t    }\n\t    return equal;\n\t}\n\t\n\t// Converts a text to a position. e.g.: '2_4_5' -> [2,4,5]\n\t\n\tfunction textToPos(t) {\n\t    return t.split('_').map(function (x) {\n\t        return parseInt(x);\n\t    });\n\t}\n\t\n\t// Converts a position to text. e.g.: [2,4,5] -> '2_4_5'\n\t\n\tfunction posToText(pos) {\n\t    return pos.join('_');\n\t}\n\t\n\t// Converts a position and a direction to text. e.g.: [2,4,5], 'n' -> '2_4_5_n'\n\t\n\tfunction posDirToText(pos, direction) {\n\t    return posToText(pos) + '_' + direction;\n\t}\n\t\n\t// Returns eclidean distance between 2 positions\n\t\n\tfunction posDist(p1, p2) {\n\t    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2) + Math.pow(p1[2] - p2[2], 2));\n\t}\n\t\n\t// Returns a rotated direction to the left\n\t\n\tfunction rotLeft(dir) {\n\t    if (dir == 'n') return 'w';else return directions[directions.indexOf(dir) - 1];\n\t}\n\t\n\t// Returns a rotated direction to the right\n\t\n\tfunction rotRight(dir) {\n\t    if (dir == 'w') return 'n';else return directions[directions.indexOf(dir) + 1];\n\t}\n\t\n\t// Returns the oposite direction\n\t\n\tfunction rot180(dir) {\n\t    return rotLeft(rotLeft(dir));\n\t}\n\t\n\tfunction getBounds(obj) {\n\t    return [obj.x, obj.y, obj.width, obj.height];\n\t}\n\n/***/ },\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */\n/*!**************************!*\\\n  !*** ./src/interface.js ***!\n  \\**************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Require all pages in ./pages and populate a dict where the values\n\t// are the text contents\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.setInterfaceBounds = setInterfaceBounds;\n\texports.openPage = openPage;\n\texports.showInterface = showInterface;\n\texports.hideInterface = hideInterface;\n\texports.hideLoadingScreen = hideLoadingScreen;\n\tvar req = __webpack_require__(/*! ./pages */ 92);\n\tvar pages = {};\n\treq.keys().forEach(function (k) {\n\t    // for each file use only the filename, without extension, as key\n\t    var k2 = k.split('/');\n\t    k2 = k2[k2.length - 1].split('.');\n\t    k2 = k2[k2.length - 2];\n\t    pages[k2] = req(k);\n\t});\n\t\n\tfunction getDiv() {\n\t    var outer = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t\n\t    if (outer) return document.getElementById('interface-outer');else return document.getElementById('interface-menus');\n\t}\n\t\n\tfunction setInterfaceBounds(bounds) {\n\t    var outer = getDiv(true);\n\t    bounds.map(function (val, index) {\n\t        outer.style[this[index]] = val + 'px';\n\t    }, [\"left\", \"top\", \"width\", \"height\"]);\n\t\n\t    getDiv().style.padding = bounds[2] / 8 + 'px ' + bounds[3] / 8 + 'px';\n\t}\n\t\n\tfunction openPage(name) {\n\t    var playSound = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\t    var replace = arguments.length <= 2 || arguments[2] === undefined ? null : arguments[2];\n\t\n\t    showInterface();\n\t    var text = pages[name];\n\t    if (replace) text = text.replace(/\\{\\{\\}\\}/g, replace);\n\t    getDiv().innerHTML = '<div class=\"page\">' + text + '</div>';\n\t    if (playSound) window.playButtonSound();\n\t    window.scrollTo(0, 0);\n\t}\n\t\n\tfunction showInterface() {\n\t    var inter = getDiv();\n\t    inter.style.zIndex = 1;\n\t    inter.style.opacity = 1;\n\t    var outer = getDiv(true);\n\t    outer.style.pointerEvents = 'auto';\n\t}\n\t\n\tfunction hideInterface() {\n\t    var inter = getDiv();\n\t    inter.style.zIndex = -1;\n\t    inter.style.opacity = 0;\n\t    inter.innerHTML = '';\n\t    var outer = getDiv(true);\n\t    outer.style.pointerEvents = 'none';\n\t}\n\t\n\tfunction hideLoadingScreen() {\n\t    var el = document.getElementById('loading-screen');\n\t    if (el) el.parentNode.removeChild(el);\n\t}\n\n/***/ },\n/* 8 */\n/*!***********************!*\\\n  !*** ./src/vision.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.addEffect = addEffect;\n\texports.loadVision = loadVision;\n\texports.resize = resize;\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _interfaceJs = __webpack_require__(/*! ./interface.js */ 7);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tfunction setVision() {\n\t    var isResize = arguments.length <= 0 || arguments[0] === undefined ? false : arguments[0];\n\t    var move = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t    if (!isResize) _storeJs.state.loadingVision = false;\n\t\n\t    if (!move || !_storeJs.state.animateMove) {\n\t        // Move without animation\n\t        if (_storeJs.state.img) _storeJs.state.img.destroy();\n\t        _storeJs.state.img = _storeJs.state.game.add.image(0, 0, (0, _utilsJs.posDirToText)(_storeJs.state.position, _storeJs.state.direction));\n\t        _storeJs.state.layers.back.add(_storeJs.state.img);\n\t        var r = Math.min(_storeJs.state.game.width / _storeJs.state.img.width, _storeJs.state.game.height / _storeJs.state.img.height);\n\t        _storeJs.state.img.scale.setTo(r);\n\t        _storeJs.state.img.x = (_storeJs.state.game.width - _storeJs.state.img.width) / 2;\n\t        _storeJs.state.img.y = (_storeJs.state.game.height - _storeJs.state.img.height) / 2;\n\t    } else {\n\t        var newImg = _storeJs.state.game.add.image(0, 0, (0, _utilsJs.posDirToText)(_storeJs.state.position, _storeJs.state.direction));\n\t        _storeJs.state.layers.back.add(newImg);\n\t        var r2 = Math.min(_storeJs.state.game.width / newImg.width, _storeJs.state.game.height / newImg.height);\n\t        newImg.scale.setTo(r2);\n\t        var zero_x = (_storeJs.state.game.width - _storeJs.state.img.width) / 2;\n\t        var zero_y = (_storeJs.state.game.height - _storeJs.state.img.height) / 2;\n\t        newImg.x = zero_x;\n\t        newImg.y = zero_y;\n\t        // Round bounds\n\t        var bounds2 = ['x', 'y', 'width', 'height'];\n\t        bounds2.map(function (key) {\n\t            return newImg[key] = Math.round(newImg[key]);\n\t        });\n\t\n\t        var tween = null;\n\t        var tweenNew = null;\n\t\n\t        if (move == 'RIGHT') {\n\t            newImg.x = zero_x + _storeJs.state.img.width;\n\t            tweenNew = _storeJs.state.game.add.tween(newImg).to({ x: zero_x }, 1000, \"Linear\");\n\t            tween = _storeJs.state.game.add.tween(_storeJs.state.img).to({ x: zero_x - _storeJs.state.img.width }, 1000, \"Linear\");\n\t        } else if (move == 'LEFT') {\n\t            newImg.x = zero_x - newImg.width;\n\t            tweenNew = _storeJs.state.game.add.tween(newImg).to({ x: zero_x }, 1000, \"Linear\");\n\t            tween = _storeJs.state.game.add.tween(_storeJs.state.img).to({ x: zero_x + _storeJs.state.img.width }, 1000, \"Linear\");\n\t        } else if (move == 'UP') {\n\t            _storeJs.state.layers.front.add(_storeJs.state.img);\n\t            newImg.x = zero_x + newImg.width / 4;\n\t            newImg.y = zero_y + newImg.height / 4;\n\t            var h = newImg.height;\n\t            var w = newImg.width;\n\t            newImg.height = h / 2;\n\t            newImg.width = w / 2;\n\t            tweenNew = _storeJs.state.game.add.tween(newImg).to({ x: zero_x, y: zero_y, height: h, width: w }, 1000, \"Linear\");\n\t            tween = _storeJs.state.game.add.tween(_storeJs.state.img).to({ alpha: 0 }, 1000, \"Linear\");\n\t        } else if (move == 'DOWN') {\n\t            // state.layers.front.add(state.img)\n\t            newImg.alpha = 0;\n\t            tweenNew = _storeJs.state.game.add.tween(newImg).to({ alpha: 1 }, 1000, \"Linear\");\n\t            tween = _storeJs.state.game.add.tween(_storeJs.state.img).to({\n\t                x: zero_x + _storeJs.state.img.width / 4,\n\t                y: zero_y + _storeJs.state.img.height / 4,\n\t                height: _storeJs.state.img.height / 2,\n\t                width: _storeJs.state.img.width / 2\n\t            }, 1000, \"Linear\");\n\t        }\n\t\n\t        tweenNew.start();\n\t        tween.start();\n\t        tween.onComplete.add(function () {\n\t            if (_storeJs.state.img) _storeJs.state.img.destroy();\n\t            _storeJs.state.img = newImg;\n\t            tween.onComplete.removeAll();\n\t        });\n\t    }\n\t\n\t    // if (state.img) state.img.destroy()\n\t    // state.img = state.game.add.image(0, 0, posDirToText(state.position, state.direction))\n\t    // state.layers.back.add(state.img)\n\t    // var r = Math.min(state.game.width/state.img.width, state.game.height/state.img.height)\n\t    // state.img.scale.setTo(r)\n\t    // state.img.x = (state.game.width - state.img.width) / 2\n\t    // state.img.y = (state.game.height - state.img.height) / 2\n\t\n\t    // Round bounds\n\t    var bounds = ['x', 'y', 'width', 'height'];\n\t    bounds.map(function (key) {\n\t        return _storeJs.state.img[key] = Math.round(_storeJs.state.img[key]);\n\t    });\n\t\n\t    // Set tint\n\t    if (_storeJs.state.tint) _storeJs.state.img.tint = _storeJs.state.tint;\n\t    // Set filter\n\t    if (_storeJs.state.filters.length) _storeJs.state.img.filters = _storeJs.state.filters;\n\t\n\t    // Map img bounds to interface\n\t    (0, _interfaceJs.setInterfaceBounds)((0, _utilsJs.getBounds)(_storeJs.state.img));\n\t\n\t    // Enable mouse move\n\t    if (_storeJs.state.onTap) {\n\t        _storeJs.state.img.inputEnabled = true;\n\t        _storeJs.state.img.events.onInputUp.add(_storeJs.state.onTap, this);\n\t    }\n\t\n\t    if (_storeJs.state.onSetVision) _storeJs.state.onSetVision(isResize);\n\t}\n\t\n\tfunction addEffect(state, color, alpha) {\n\t    if (state.effect) state.effect.destroy();\n\t    state.effect = state.game.add.graphics(0, 0);\n\t    state.effect.beginFill(color, alpha);\n\t    state.effect.drawRect(state.img.x, state.img.y, state.img.width, state.img.height);\n\t    state.effect.endFill();\n\t    state.layers.front.add(state.effect);\n\t    return state.effect;\n\t}\n\t\n\tfunction loadVision(state) {\n\t    var move = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t    var s = (0, _utilsJs.posDirToText)(state.position, state.direction);\n\t    if (!state.game.cache.checkImageKey(s)) {\n\t        state.loadingVision = true;\n\t        var signal = state.game.load.image(s, 'assets/map/' + s + '.jpg').onFileComplete;\n\t        signal.add(function () {\n\t            setVision(false, move);\n\t            signal.removeAll();\n\t        });\n\t        state.game.load.start();\n\t    } else {\n\t        setVision(false, move);\n\t    }\n\t}\n\t\n\tfunction resize() {\n\t    _storeJs.state.game.scale.setGameSize(window.innerWidth, window.innerHeight);\n\t    setVision(true);\n\t}\n\t\n\t// Resizes game on window resize\n\t// based on: http://www.html5gamedevs.com/topic/13900-doubt-about-making-my-game-responsive-on-onresize/\n\t// The delay is supposed to help on some devices\n\twindow.addEventListener('resize', function () {\n\t    return _storeJs.state.game.time.events.add(200, resize);\n\t}, false);\n\n/***/ },\n/* 9 */,\n/* 10 */,\n/* 11 */,\n/* 12 */\n/*!**********************!*\\\n  !*** ./src/audio.js ***!\n  \\**********************/\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\texports.setListenerPos = setListenerPos;\n\texports.setAudioOri = setAudioOri;\n\texports.setPannerPos = setPannerPos;\n\texports.addSound = addSound;\n\tvar audioMult = 1;\n\t\n\tfunction setListenerPos(context, pos) {\n\t    // The +1 avoids 0 distance. It hurts the ears.\n\t    context.listener.setPosition(pos[0] * audioMult, pos[2] + 1, -pos[1] * audioMult);\n\t}\n\t\n\tfunction setAudioOri(context, direction) {\n\t    var _direction = _slicedToArray(direction, 3);\n\t\n\t    var x = _direction[0];\n\t    var y = _direction[1];\n\t    var z = _direction[2];\n\t\n\t    context.listener.setOrientation(x, z, -y, 0, 1, 0);\n\t}\n\t\n\tfunction setPannerPos(panner, pos) {\n\t    var _pos = _slicedToArray(pos, 3);\n\t\n\t    var x = _pos[0];\n\t    var y = _pos[1];\n\t    var z = _pos[2];\n\t\n\t    panner.setPosition(x * audioMult, z * audioMult, -y * audioMult);\n\t}\n\t\n\tfunction addSound(game, position, soundName) {\n\t    var soundGain = arguments.length <= 3 || arguments[3] === undefined ? 1 : arguments[3];\n\t\n\t    var audio = game.add.audio(soundName);\n\t    var panner = game.sound.context.createPanner();\n\t\n\t    panner.panningModel = 'HRTF';\n\t    panner.distanceModel = 'exponential';\n\t    panner.refDistance = 1;\n\t    panner.maxDistance = 4;\n\t    panner.rolloffFactor = 4;\n\t\n\t    audio.gainNode.disconnect();\n\t    audio.gainNode.connect(panner);\n\t\n\t    // panner.connect(game.sound.masterGain)\n\t    var volume = game.sound.context.createGain();\n\t    panner.connect(volume);\n\t    volume.connect(game.sound.masterGain);\n\t    volume.gain.value = soundGain;\n\t\n\t    setPannerPos(panner, position);\n\t    audio.loop = true;\n\t    audio.play();\n\t\n\t    return { audio: audio, panner: panner, volume: volume };\n\t}\n\n/***/ },\n/* 13 */\n/*!*****************************!*\\\n  !*** ./src/createAudios.js ***!\n  \\*****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.createCommonAudios = createCommonAudios;\n\texports.createPositionedAudios = createPositionedAudios;\n\texports.changePresenceSoundGain = changePresenceSoundGain;\n\t\n\tvar _audioJs = __webpack_require__(/*! ./audio.js */ 12);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tfunction createCommonAudios() {\n\t    // steps sound\n\t    var steps = _storeJs.state.game.add.audio('steps');\n\t    steps.allowMultiple = true;\n\t    for (var i = 0; i < 6; i++) {\n\t        steps.addMarker(i, i, 1);\n\t    }\n\t\n\t    // more sounds\n\t    Object.assign(_storeJs.state.game.createdSounds, {\n\t        steps: steps,\n\t        harp: _storeJs.state.game.add.audio('harp', 0.8),\n\t        harpStart: _storeJs.state.game.add.audio('harp_start', 0.8),\n\t        button: _storeJs.state.game.add.audio('button', 0.5),\n\t        magic: _storeJs.state.game.add.audio('magic'),\n\t        magicNo: _storeJs.state.game.add.audio('magic_no'),\n\t        magicRequest: _storeJs.state.game.add.audio('magic_request'),\n\t        magicArrived: _storeJs.state.game.add.audio('magic_arrived'),\n\t        darkSpell: _storeJs.state.game.add.audio('dark_spell', 1.5),\n\t        darkSong: _storeJs.state.game.add.audio('dark_song', 1, true),\n\t        darkPresence: _storeJs.state.game.add.audio('dark_presence', 1, true),\n\t        rarr: _storeJs.state.game.add.audio('rarr'),\n\t        end2: _storeJs.state.game.add.audio('end2')\n\t    });\n\t}\n\t\n\tfunction createPositionedAudios() {\n\t    for (var k in _storeJs.shrines) {\n\t        var shrine = _storeJs.shrines[k];\n\t        // Add shrine\n\t        if (!shrine.sound) shrine.sound = (0, _audioJs.addSound)(_storeJs.state.game, shrine.position, shrine.soundName, shrine.gain);\n\t\n\t        var presence = _storeJs.state.presences[k];\n\t        // Add presence\n\t        if (!presence.sound) {\n\t            presence.sound = (0, _audioJs.addSound)(_storeJs.state.game, presence.position, shrine.soundName, shrine.gain);\n\t        } else {\n\t            (0, _audioJs.setPannerPos)(presence.sound.panner, presence.position);\n\t        }\n\t        changePresenceSoundGain(k, 1);\n\t    }\n\t\n\t    // Dark Presence\n\t    if (_storeJs.state.level == 2) {\n\t        var darkPres = _storeJs.state.darkPresence;\n\t        if (!darkPres.sound) {\n\t            _storeJs.state.darkPresence.sound = (0, _audioJs.addSound)(_storeJs.state.game, darkPres.position, 'dark_presence', 1.5);\n\t        } else {\n\t            (0, _audioJs.setPannerPos)(darkPres.sound.panner, darkPres.position);\n\t            _storeJs.state.darkPresence.sound.volume.gain.value = 1;\n\t        }\n\t    } else {\n\t        if (_storeJs.state.darkPresence.sound) {\n\t            _storeJs.state.darkPresence.sound.volume.gain.value = 0;\n\t        }\n\t    }\n\t}\n\t\n\tfunction changePresenceSoundGain(presenceName, mult) {\n\t    _storeJs.state.presences[presenceName].sound.volume.gain.value = _storeJs.shrines[presenceName].gain * mult;\n\t}\n\n/***/ },\n/* 14 */\n/*!*********************!*\\\n  !*** ./src/game.js ***!\n  \\*********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.playSong = playSong;\n\texports.stopSong = stopSong;\n\texports.touchedDarkPresence = touchedDarkPresence;\n\texports.onSetVision = onSetVision;\n\texports.interact = interact;\n\texports.openTutWhenInPresence = openTutWhenInPresence;\n\texports.playButtonSound = playButtonSound;\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _movementJs = __webpack_require__(/*! ./movement.js */ 15);\n\t\n\tvar _visionJs = __webpack_require__(/*! ./vision.js */ 8);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tvar _createAudiosJs = __webpack_require__(/*! ./createAudios.js */ 13);\n\t\n\tvar _tutorialJs = __webpack_require__(/*! ./tutorial.js */ 16);\n\t\n\tfunction playSong(name) {\n\t    var fadeInTime = arguments.length <= 1 || arguments[1] === undefined ? 2000 : arguments[1];\n\t\n\t    if (_storeJs.state.currentSong) _storeJs.state.currentSong.stop();\n\t    _storeJs.state.currentSong = _storeJs.state.game.createdSounds[name];\n\t    _storeJs.state.currentSong.fadeIn(fadeInTime, true, '');\n\t}\n\t\n\tfunction stopSong() {\n\t    var fadeOutTime = arguments.length <= 0 || arguments[0] === undefined ? 2000 : arguments[0];\n\t\n\t    if (_storeJs.state.currentSong && _storeJs.state.currentSong.isPlaying) _storeJs.state.currentSong.fadeOut(fadeOutTime);\n\t}\n\t\n\tfunction touchedDarkPresence() {\n\t    if (_storeJs.state.followed.length == 4) _storeJs.state.won();else _storeJs.state.lost();\n\t}\n\t\n\tfunction onSetVision(isResize) {\n\t\n\t    // Make sure that the song won't play in game.\n\t    if (_storeJs.state.state == 'playing') stopSong();\n\t\n\t    // Effects\n\t    if (['pregame', 'starting'].includes(_storeJs.state.state)) {\n\t        (0, _visionJs.addEffect)(_storeJs.state, 0x000000, 1);\n\t        if (_storeJs.state.state == 'starting') {\n\t            _storeJs.state.state = 'playing';\n\t            stopSong();\n\t            _storeJs.state.game.add.tween(_storeJs.state.effect).to({ alpha: 0 }, 2000, \"Linear\", true);\n\t            if (!isResize) {\n\t                if (_storeJs.state.level == 1) _storeJs.state.game.createdSounds.harpStart.play();\n\t            }\n\t        }\n\t    }\n\t\n\t    // var tweenBack = state.game.add.tween(effect).to( { alpha: 0 }, 1000, \"Linear\")\n\t    // tweenTo.chain(tweenBack)\n\t    // tweenTo.start()\n\t\n\t    if (!isResize) {\n\t        checkFollowPresence();\n\t        checkInShrine();\n\t    }\n\t}\n\t\n\tfunction interact() {\n\t    if (_storeJs.state.state == 'playing') {\n\t        var presence = isInPresence(_storeJs.state.position);\n\t        if (presence && _storeJs.state.power.includes(presence) && !_storeJs.state.presences[presence].arrived) {\n\t\n\t            if (_storeJs.state.level == 2 || !_storeJs.state.followed.length) {\n\t                // presence starts to follow player\n\t                _storeJs.state.followed.push(presence);\n\t                (0, _createAudiosJs.changePresenceSoundGain)(presence, 0.25);\n\t                _storeJs.state.game.createdSounds.magicRequest.play();\n\t                if (_storeJs.state.level == 2) {\n\t                    // Gain color!\n\t                    _storeJs.state.tint += _storeJs.shrines[presence].color;\n\t                    if (_storeJs.state.filters.length) _storeJs.state.filters = [];\n\t                }\n\t\n\t                // Open tutorial dialog if needed\n\t                (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.callingPresence, presence);\n\t\n\t                return true;\n\t            }\n\t        }\n\t        _storeJs.state.game.createdSounds.magicNo.play();\n\t    }\n\t\n\t    return false;\n\t}\n\t\n\tfunction checkFollowPresence() {\n\t    // if (state.followed) {\n\t    var _iteratorNormalCompletion = true;\n\t    var _didIteratorError = false;\n\t    var _iteratorError = undefined;\n\t\n\t    try {\n\t        for (var _iterator = _storeJs.state.followed[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t            var p = _step.value;\n\t\n\t            (0, _movementJs.changePresencePos)(_storeJs.state.presences[p], _storeJs.state.position, 2000);\n\t        }\n\t        // }\n\t    } catch (err) {\n\t        _didIteratorError = true;\n\t        _iteratorError = err;\n\t    } finally {\n\t        try {\n\t            if (!_iteratorNormalCompletion && _iterator['return']) {\n\t                _iterator['return']();\n\t            }\n\t        } finally {\n\t            if (_didIteratorError) {\n\t                throw _iteratorError;\n\t            }\n\t        }\n\t    }\n\t}\n\t\n\t// Check if is in a different shrine and set player power\n\tfunction checkInShrine() {\n\t    var shrine = isInShrine(_storeJs.state.position);\n\t    if (shrine) {\n\t        if (_storeJs.state.level == 1) {\n\t            // If not followed and entering a shrine of different power\n\t            // that still hasn't its presence\n\t            if (!_storeJs.state.followed.length && !_storeJs.state.presences[shrine].arrived) {\n\t                var newPower = true;\n\t                if (_storeJs.state.power.length && _storeJs.state.power[0] == shrine) newPower = false;\n\t                if (newPower) {\n\t                    if (_storeJs.state.power.length) {\n\t                        // Changing current power\n\t                        (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.changedPower, shrine);\n\t                    } else {\n\t                        // First power\n\t                        (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.searchingShrine, shrine);\n\t                    }\n\t                    setPower(shrine, true);\n\t                }\n\t\n\t                // If followed by presence of the current shrine\n\t            } else if (_storeJs.state.followed.includes(shrine)) {\n\t                    presenceArrived(_storeJs.state, shrine);\n\t\n\t                    // Open tutorial dialog if needed\n\t                    (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.returningPresence, shrine);\n\t                }\n\t        } else {\n\t            if (!_storeJs.state.power.includes(shrine)) setPower(shrine);\n\t        }\n\t    }\n\t}\n\t\n\tfunction presenceArrived(state, presence) {\n\t    state.presences[presence].arrived = true;\n\t    (0, _createAudiosJs.changePresenceSoundGain)(presence, 1);\n\t    // Pop presence from followed\n\t    state.followed.splice(state.followed.indexOf(presence), 1);\n\t    // Pop power\n\t    state.power.splice(state.power.indexOf(presence), 1);\n\t    state.game.createdSounds.magicArrived.play();\n\t\n\t    // If all presences arrived: The end!\n\t    if (Object.keys(state.presences).reduce(function (p, c) {\n\t        return p && state.presences[c].arrived;\n\t    }, true)) {\n\t        state.game.createdSounds.magicArrived.onStop.add(function () {\n\t            state.won();\n\t            state.game.createdSounds.magicArrived.onStop.removeAll();\n\t        });\n\t    }\n\t}\n\t\n\t// Set player power and display effect/sound\n\tfunction setPower(power) {\n\t    var replace = arguments.length <= 1 || arguments[1] === undefined ? false : arguments[1];\n\t\n\t    if (replace) _storeJs.state.power = [];\n\t    _storeJs.state.power.push(power);\n\t\n\t    // visual effect when entering a different shrine\n\t    var effect = (0, _visionJs.addEffect)(_storeJs.state, _storeJs.shrines[power].color, 0.5);\n\t    effect.alpha = 0;\n\t    var tweenTo = _storeJs.state.game.add.tween(effect).to({ alpha: 1 }, 1000, \"Linear\");\n\t    var tweenBack = _storeJs.state.game.add.tween(effect).to({ alpha: 0 }, 1000, \"Linear\");\n\t    tweenTo.chain(tweenBack);\n\t    tweenTo.start();\n\t    _storeJs.state.game.createdSounds.magic.play();\n\t    tweenBack.onComplete.add(function () {\n\t        return effect.destroy();\n\t    });\n\t}\n\t\n\t// check if position is the same of a shrine\n\tfunction isInShrine(position) {\n\t    for (var k in _storeJs.shrines) {\n\t        if ((0, _utilsJs.equalArrays)(position, _storeJs.shrines[k].walkablePos)) return k;\n\t    }\n\t    return null;\n\t}\n\t\n\t// check if position is the same of a presence\n\tfunction isInPresence(position) {\n\t    for (var k in _storeJs.state.presences) {\n\t        if ((0, _utilsJs.equalArrays)(position, _storeJs.state.presences[k].position) && !_storeJs.state.followed.includes(k)) return k;\n\t    }\n\t    return null;\n\t}\n\t\n\tfunction openTutWhenInPresence() {\n\t    var presence = isInPresence(_storeJs.state.position);\n\t    if (presence && _storeJs.state.power.includes(presence)) (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.searchingPresence, presence);\n\t}\n\t\n\tfunction playButtonSound() {\n\t    _storeJs.state.game.createdSounds.button.play();\n\t}\n\t\n\t// function createGameElements() {\n\t//     console.log('Creating...')\n\t\n\t//     // state.game.createdSounds.song.stop()\n\t//     // hideInterface()\n\t//     // startLevel()\n\t//     // setTimeout(function () {\n\t//     //     for (let p in state.presences) {\n\t//     //         state.followed = p\n\t//     //         presenceArrived(state)\n\t//     //     }\n\t//     // }, 2000)\n\t\n\t//     // setTimeout(function () {\n\t//     //     // TODO: tratar melhor qual música para/toca\n\t//     //     state.game.createdSounds.song.stop()\n\t//     //     // loadLevel2()\n\t//     //     // toLevel2intro()\n\t//     // }, 2000)\n\t\n\t//     // loadLevel2()\n\t//     // randomizePresencePositions(state.position)\n\t//     // startLevel()\n\t\n\t//     // openPage('controls', false)\n\t//     // openPage('instrorstart', false)\n\t\n\t//     // Debug\n\t//     // state.effect2 = state.game.add.graphics(0, 0)\n\t//     // state.effect2.beginFill(0xff0000, 1)\n\t//     // state.effect2.drawRect(0, 0, 10, 10)\n\t//     // state.effect2.endFill()\n\t// }\n\t\n\tfunction cheatLevel1() {\n\t    for (var p in _storeJs.state.presences) {\n\t        _storeJs.state.followed.push(p);\n\t        presenceArrived(_storeJs.state, p);\n\t    }\n\t}\n\tfunction cheatLevel2() {\n\t    for (var p in _storeJs.state.presences) {\n\t        _storeJs.state.followed.push(p);\n\t    }\n\t    // touchedDarkPresence()\n\t}\n\twindow.cheats = {\n\t    l1: cheatLevel1,\n\t    l2: cheatLevel2\n\t};\n\n/***/ },\n/* 15 */\n/*!*************************!*\\\n  !*** ./src/movement.js ***!\n  \\*************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\texports.changeDarkPresencePos = changeDarkPresencePos;\n\texports.move = move;\n\texports.changePresencePos = changePresencePos;\n\texports.tweenPos = tweenPos;\n\texports.initPlayerPos = initPlayerPos;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _assetsMapMapJs = __webpack_require__(/*! ../assets/map/map.js */ 22);\n\t\n\tvar _assetsMapMapJs2 = _interopRequireDefault(_assetsMapMapJs);\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _audioJs = __webpack_require__(/*! ./audio.js */ 12);\n\t\n\tvar _visionJs = __webpack_require__(/*! ./vision.js */ 8);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tvar walk = {\n\t    e: [1, 0, 0],\n\t    s: [0, -1, 0],\n\t    w: [-1, 0, 0],\n\t    n: [0, 1, 0]\n\t};\n\t\n\tfunction tryChangePos(direction) {\n\t    var newPos = _assetsMapMapJs2['default'][(0, _utilsJs.posToText)(_storeJs.state.position)][direction];\n\t    if (newPos) {\n\t        var oldPos = _storeJs.state.position;\n\t        _storeJs.state.position = newPos;\n\t        var posSetter = function posSetter(pos) {\n\t            return (0, _audioJs.setListenerPos)(_storeJs.state.game.sound.context, pos);\n\t        };\n\t        tweenPos(oldPos, newPos, posSetter, 500, _storeJs.state, 'Move');\n\t        _storeJs.state.game.createdSounds.steps.play((0, _utilsJs.randInt)(5));\n\t        return true;\n\t    }\n\t    return false;\n\t}\n\t\n\tfunction changeDarkPresencePos(playerPos, fTouched) {\n\t    var oldPos = _storeJs.state.darkPresence.position;\n\t    var posSetter = function posSetter(pos) {\n\t        if (_storeJs.state.state == 'playing') {\n\t            (0, _audioJs.setPannerPos)(_storeJs.state.darkPresence.sound.panner, pos);\n\t            _storeJs.state.darkPresence.position = pos;\n\t            // state.effect2.x = pos[0] * 50\n\t            // state.effect2.y = pos[1] * 50\n\t            if ((0, _utilsJs.posDist)(pos, _storeJs.state.position) < 0.5 && fTouched) fTouched();\n\t        }\n\t    };\n\t    var time = (0, _utilsJs.posDist)(oldPos, playerPos) * 3500;\n\t    tweenPos(oldPos, playerPos, posSetter, time, _storeJs.state.darkPresence);\n\t}\n\t\n\tfunction move(event, key) {\n\t    if (_storeJs.state.state == 'playing' && !_storeJs.state.loadingVision\n\t    /*&& noRecentMove(state, 1000)*/) {\n\t            var moved = false;\n\t            var rotated = false;\n\t            switch (key) {\n\t                case 'UP':\n\t                    moved = tryChangePos(_storeJs.state.direction);\n\t                    break;\n\t                case 'DOWN':\n\t                    moved = tryChangePos((0, _utilsJs.rot180)(_storeJs.state.direction));\n\t                    break;\n\t                case 'LEFT':\n\t                    rotatePlayer(_storeJs.state, 'left');\n\t                    rotated = true;\n\t                    break;\n\t                case 'RIGHT':\n\t                    rotatePlayer(_storeJs.state, 'right');\n\t                    rotated = true;\n\t                    break;\n\t                case 'A':\n\t                    console.log('Switching Animate Move Mode');\n\t                    _storeJs.state.animateMove = !_storeJs.state.animateMove;\n\t            }\n\t            // checkTeleportation(state)\n\t            if (rotated || moved) (0, _visionJs.loadVision)(_storeJs.state, key);\n\t            if (moved && _storeJs.state.onMoved) _storeJs.state.onMoved();\n\t        }\n\t}\n\t\n\tfunction rotatePlayer(state, type) {\n\t    var oldPos = walk[state.direction];\n\t    if (type == 'left') state.direction = (0, _utilsJs.rotLeft)(state.direction);else state.direction = (0, _utilsJs.rotRight)(state.direction);\n\t    var newPos = walk[state.direction];\n\t    var posSetter = function posSetter(pos) {\n\t        return (0, _audioJs.setAudioOri)(state.game.sound.context, pos);\n\t    };\n\t    tweenPos(oldPos, newPos, posSetter, 500, state, 'Rotate');\n\t}\n\t\n\tfunction changePresencePos(presence, newPos, time) {\n\t    var oldPos = presence.position;\n\t    presence.position = newPos;\n\t    var posSetter = function posSetter(pos) {\n\t        return (0, _audioJs.setPannerPos)(presence.sound.panner, pos);\n\t    };\n\t    tweenPos(oldPos, newPos, posSetter, time, presence);\n\t}\n\t\n\t// Tween a position running posSetter on each interaction.\n\t// Store tween in 'store', use 'tween'+extraName to name the pointer.\n\t\n\tfunction tweenPos(oldPos, newPos, posSetter, time, store, extraName) {\n\t    var _oldPos = _slicedToArray(oldPos, 3);\n\t\n\t    var ox = _oldPos[0];\n\t    var oy = _oldPos[1];\n\t    var oz = _oldPos[2];\n\t\n\t    var _newPos = _slicedToArray(newPos, 3);\n\t\n\t    var nx = _newPos[0];\n\t    var ny = _newPos[1];\n\t    var nz = _newPos[2];\n\t\n\t    var obj = { x: ox, y: oy, z: oz };\n\t    var tweenTo = _storeJs.state.game.add.tween(obj).to({ x: nx, y: ny, z: nz }, time, \"Linear\");\n\t    var updateFunc = function updateFunc() {\n\t        return posSetter([obj.x, obj.y, obj.z]);\n\t    };\n\t    tweenTo.onUpdateCallback(updateFunc);\n\t    tweenTo.onComplete.add(updateFunc);\n\t    tweenTo.start();\n\t    // Remove old tween, save pointer to new tween\n\t    if (store) {\n\t        var name = 'tween';\n\t        if (extraName) name += extraName;\n\t        if (store[name]) store[name].stop();\n\t        store[name] = tweenTo;\n\t    }\n\t}\n\t\n\tfunction initPlayerPos() {\n\t    (0, _audioJs.setListenerPos)(_storeJs.state.game.sound.context, _storeJs.state.position);\n\t    (0, _audioJs.setAudioOri)(_storeJs.state.game.sound.context, walk[_storeJs.state.direction]);\n\t}\n\t\n\t// function noRecentMove(state, time) {\n\t//     var currTime = new Date().getTime()\n\t//     if (state.lastMoveTime) {\n\t//         if (Math.abs(currTime - state.lastMoveTime) < time) return false\n\t//     }\n\t//     state.lastMoveTime = currTime\n\t//     return true\n\t// }\n\n/***/ },\n/* 16 */\n/*!*************************!*\\\n  !*** ./src/tutorial.js ***!\n  \\*************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.closeTutMsg = closeTutMsg;\n\texports.checkTutorial = checkTutorial;\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tvar _interfaceJs = __webpack_require__(/*! ./interface.js */ 7);\n\t\n\tvar TUTORIAL_PHASES = {\n\t    startingGame: 1,\n\t    searchingShrine: 2,\n\t    searchingPresence: 3,\n\t    changedPower: '2x',\n\t    callingPresence: 4,\n\t    returningPresence: 5\n\t};\n\t\n\texports.TUTORIAL_PHASES = TUTORIAL_PHASES;\n\t\n\tfunction closeTutMsg() {\n\t    (0, _interfaceJs.hideInterface)();\n\t    _storeJs.state.tutorial += 1;\n\t}\n\t\n\tfunction checkTutorial(phase) {\n\t    var replace = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t    if (phase == _storeJs.state.tutorial) (0, _interfaceJs.openPage)('tut' + _storeJs.state.tutorial + 'a', true, replace);\n\t    // Handle when player changed power while still in the tutorial\n\t    else if (phase == TUTORIAL_PHASES.changedPower && _storeJs.state.tutorial == TUTORIAL_PHASES.searchingPresence) {\n\t            _storeJs.state.tutorial = TUTORIAL_PHASES.searchingShrine;\n\t            (0, _interfaceJs.openPage)('tut' + TUTORIAL_PHASES.changedPower + 'a', true, replace);\n\t        }\n\t}\n\n/***/ },\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */\n/*!***************************!*\\\n  !*** ./assets/map/map.js ***!\n  \\***************************/\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar map = { \"4_0_0\": { \"e\": [5, 0, 0], \"n\": [4, 1, 0], \"w\": [3, 0, 0] }, \"6_6_0\": { \"s\": [6, 5, 0], \"e\": [7, 6, 0], \"w\": [5, 6, 0] }, \"2_6_0\": { \"s\": [2, 5, 0], \"e\": [3, 6, 0] }, \"3_7_0\": { \"s\": [3, 6, 0], \"e\": [4, 7, 0] }, \"8_3_0\": { \"s\": [8, 2, 0], \"n\": [8, 4, 0] }, \"1_2_0\": { \"e\": [2, 2, 0], \"n\": [1, 3, 0], \"w\": [0, 2, 0] }, \"3_0_0\": { \"e\": [4, 0, 0], \"w\": [2, 0, 0] }, \"0_2_0\": { \"s\": [0, 1, 0], \"e\": [1, 2, 0] }, \"-1_7_0\": { \"e\": [0, 7, 0] }, \"3_4_0\": { \"e\": [4, 4, 0], \"w\": [2, 4, 0] }, \"6_7_0\": { \"e\": [7, 7, 0], \"w\": [5, 7, 0] }, \"6_4_0\": { \"s\": [6, 3, 0], \"e\": [7, 4, 0], \"n\": [6, 5, 0], \"w\": [5, 4, 0] }, \"1_8_0\": { \"s\": [1, 7, 0], \"w\": [0, 8, 0] }, \"1_0_0\": { \"n\": [1, 1, 0], \"w\": [0, 0, 0] }, \"8_6_0\": { \"s\": [8, 5, 0], \"w\": [7, 6, 0] }, \"6_3_0\": { \"s\": [6, 2, 0], \"n\": [6, 4, 0] }, \"4_4_0\": { \"s\": [4, 3, 0], \"e\": [5, 4, 0], \"n\": [4, 5, 0], \"w\": [3, 4, 0] }, \"8_8_0\": { \"s\": [8, 7, 0], \"n\": [8, 9, 0] }, \"6_5_0\": { \"s\": [6, 4, 0], \"n\": [6, 6, 0] }, \"5_1_0\": { \"s\": [5, 0, 0], \"n\": [5, 2, 0] }, \"3_2_0\": { \"s\": [3, 1, 0] }, \"0_7_0\": { \"n\": [0, 8, 0], \"w\": [-1, 7, 0] }, \"7_0_0\": { \"e\": [8, 0, 0], \"w\": [6, 0, 0] }, \"4_3_0\": { \"s\": [4, 2, 0], \"n\": [4, 4, 0] }, \"7_7_0\": { \"s\": [7, 6, 0], \"e\": [8, 7, 0], \"n\": [7, 8, 0], \"w\": [6, 7, 0] }, \"2_2_0\": { \"w\": [1, 2, 0] }, \"7_2_0\": { \"s\": [7, 1, 0], \"e\": [8, 2, 0], \"w\": [6, 2, 0] }, \"4_1_0\": { \"s\": [4, 0, 0] }, \"1_1_0\": { \"s\": [1, 0, 0], \"e\": [2, 1, 0], \"w\": [0, 1, 0] }, \"2_1_0\": { \"s\": [2, 0, 0], \"e\": [3, 1, 0], \"w\": [1, 1, 0] }, \"2_5_0\": { \"n\": [2, 6, 0], \"w\": [1, 5, 0] }, \"8_2_0\": { \"n\": [8, 3, 0], \"w\": [7, 2, 0] }, \"2_4_0\": { \"s\": [2, 3, 0], \"e\": [3, 4, 0], \"w\": [1, 4, 0] }, \"8_4_0\": { \"s\": [8, 3, 0], \"n\": [8, 5, 0], \"w\": [7, 4, 0] }, \"0_5_0\": { \"n\": [0, 6, 0] }, \"1_4_0\": { \"s\": [1, 3, 0], \"e\": [2, 4, 0], \"n\": [1, 5, 0], \"w\": [0, 4, 0] }, \"6_1_0\": { \"s\": [6, 0, 0], \"e\": [7, 1, 0] }, \"0_1_0\": { \"e\": [1, 1, 0], \"n\": [0, 2, 0] }, \"5_2_0\": { \"s\": [5, 1, 0], \"e\": [6, 2, 0], \"w\": [4, 2, 0] }, \"1_7_0\": { \"s\": [1, 6, 0], \"e\": [2, 7, 0], \"n\": [1, 8, 0] }, \"1_5_0\": { \"s\": [1, 4, 0], \"e\": [2, 5, 0] }, \"2_3_0\": { \"n\": [2, 4, 0], \"w\": [1, 3, 0] }, \"3_6_0\": { \"n\": [3, 7, 0], \"w\": [2, 6, 0] }, \"4_6_0\": { \"s\": [4, 5, 0], \"n\": [4, 7, 0] }, \"0_8_0\": { \"s\": [0, 7, 0], \"e\": [1, 8, 0] }, \"5_7_0\": { \"e\": [6, 7, 0], \"w\": [4, 7, 0] }, \"9_0_0\": { \"w\": [8, 0, 0] }, \"3_1_0\": { \"n\": [3, 2, 0], \"w\": [2, 1, 0] }, \"8_9_0\": { \"s\": [8, 8, 0] }, \"4_8_0\": { \"e\": [5, 8, 0], \"w\": [3, 8, 0] }, \"5_4_0\": { \"e\": [6, 4, 0], \"w\": [4, 4, 0] }, \"0_0_0\": { \"s\": [0, -1, 0], \"e\": [1, 0, 0] }, \"4_2_0\": { \"e\": [5, 2, 0], \"n\": [4, 3, 0] }, \"3_8_0\": { \"e\": [4, 8, 0], \"w\": [2, 8, 0] }, \"5_0_0\": { \"n\": [5, 1, 0], \"w\": [4, 0, 0] }, \"7_6_0\": { \"e\": [8, 6, 0], \"n\": [7, 7, 0], \"w\": [6, 6, 0] }, \"2_8_0\": { \"s\": [2, 7, 0], \"e\": [3, 8, 0] }, \"8_7_0\": { \"n\": [8, 8, 0], \"w\": [7, 7, 0] }, \"2_7_0\": { \"n\": [2, 8, 0], \"w\": [1, 7, 0] }, \"0_-1_0\": { \"n\": [0, 0, 0] }, \"0_4_0\": { \"s\": [0, 3, 0], \"e\": [1, 4, 0] }, \"6_0_0\": { \"e\": [7, 0, 0], \"n\": [6, 1, 0] }, \"4_7_0\": { \"s\": [4, 6, 0], \"e\": [5, 7, 0], \"w\": [3, 7, 0] }, \"7_4_0\": { \"e\": [8, 4, 0], \"w\": [6, 4, 0] }, \"1_6_0\": { \"n\": [1, 7, 0], \"w\": [0, 6, 0] }, \"6_2_0\": { \"e\": [7, 2, 0], \"n\": [6, 3, 0], \"w\": [5, 2, 0] }, \"5_8_0\": { \"e\": [6, 8, 0], \"w\": [4, 8, 0] }, \"0_3_0\": { \"e\": [1, 3, 0], \"n\": [0, 4, 0] }, \"2_0_0\": { \"e\": [3, 0, 0], \"n\": [2, 1, 0] }, \"5_6_0\": { \"e\": [6, 6, 0] }, \"7_8_0\": { \"s\": [7, 7, 0], \"w\": [6, 8, 0] }, \"8_1_0\": { \"w\": [7, 1, 0] }, \"4_5_0\": { \"s\": [4, 4, 0], \"n\": [4, 6, 0] }, \"0_6_0\": { \"s\": [0, 5, 0], \"e\": [1, 6, 0] }, \"8_0_0\": { \"e\": [9, 0, 0], \"w\": [7, 0, 0] }, \"8_5_0\": { \"s\": [8, 4, 0], \"n\": [8, 6, 0] }, \"1_3_0\": { \"s\": [1, 2, 0], \"e\": [2, 3, 0], \"n\": [1, 4, 0], \"w\": [0, 3, 0] }, \"7_1_0\": { \"e\": [8, 1, 0], \"n\": [7, 2, 0], \"w\": [6, 1, 0] }, \"6_8_0\": { \"e\": [7, 8, 0], \"w\": [5, 8, 0] } };\n\texports[\"default\"] = map;\n\tmodule.exports = exports[\"default\"];\n\n/***/ },\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */\n/*!**********************!*\\\n  !*** ./src/input.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\texports.initKeyboardInput = initKeyboardInput;\n\texports.initMouseInput = initMouseInput;\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tfunction initKeyboardInput(fMove, fInteract) {\n\t    var _this = this;\n\t\n\t    var cursors = ['UP', 'DOWN', 'LEFT', 'RIGHT', 'A'];\n\t    cursors.map(function (key) {\n\t        return _storeJs.state.game.input.keyboard.addKey(Phaser.Keyboard[key]).onDown.add(fMove, _this, null, key);\n\t    });\n\t\n\t    _storeJs.state.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR).onDown.add(fInteract, this, null);\n\t}\n\t\n\tfunction initMouseInput(fMove, fInteract) {\n\t    _storeJs.state.onTap = function (manager, pointer) {\n\t        return onTap(pointer, fMove, fInteract);\n\t    };\n\t}\n\t\n\tfunction onTap(pointer, fMove, fInteract) {\n\t    var x = pointer.x;\n\t    var y = pointer.y;\n\t\n\t    // The image is divided in 5 areas: top, bottom, left, right and\n\t    // center. A bigger p makes the center smaller and the other areas\n\t    // bigger but more narrow.\n\t    var p = 0.28;\n\t\n\t    var _getBounds = (0, _utilsJs.getBounds)(_storeJs.state.img);\n\t\n\t    var _getBounds2 = _slicedToArray(_getBounds, 4);\n\t\n\t    var ix = _getBounds2[0];\n\t    var iy = _getBounds2[1];\n\t    var iw = _getBounds2[2];\n\t    var ih = _getBounds2[3];\n\t\n\t    var ty = iy + ih * p;\n\t    var by = iy + ih * (1 - p);\n\t    var lx = ix + iw * p;\n\t    var rx = ix + iw * (1 - p);\n\t    // var area = null\n\t\n\t    // Left, Right or Middle\n\t    if (y > ty && y < by) {\n\t        if (x < lx) fMove(null, 'LEFT'); //area = 'left'\n\t        else if (x > rx) fMove(null, 'RIGHT'); //area = 'right'\n\t            else fInteract(); //area = 'center'\n\t        // Tor or Bottom\n\t    } else if (x > lx && x < rx) {\n\t            if (y < ty) fMove(null, 'UP'); //area = 'top'\n\t            else if (y > by) fMove(null, 'DOWN'); //area = 'bottom'\n\t        }\n\t}\n\n/***/ },\n/* 30 */\n/*!***********************!*\\\n  !*** ./src/levels.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.startLevel = startLevel;\n\texports.pickLevel = pickLevel;\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _interfaceJs = __webpack_require__(/*! ./interface.js */ 7);\n\t\n\tvar _visionJs = __webpack_require__(/*! ./vision.js */ 8);\n\t\n\tvar _randPosJs = __webpack_require__(/*! ./randPos.js */ 32);\n\t\n\tvar _movementJs = __webpack_require__(/*! ./movement.js */ 15);\n\t\n\tvar _createAudiosJs = __webpack_require__(/*! ./createAudios.js */ 13);\n\t\n\tvar _gameJs = __webpack_require__(/*! ./game.js */ 14);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tvar _audioJs = __webpack_require__(/*! ./audio.js */ 12);\n\t\n\tvar _tutorialJs = __webpack_require__(/*! ./tutorial.js */ 16);\n\t\n\tvar darkPresencePhrases = ['Raaaaarrrrr!!!!', 'Embrace Darkness!', \"You can't win!\", \"You can't hide!\", \"You can't escape!\", \"You are doomed!\", 'I found you.', 'Again?', 'Run faster next time.', 'Muhahahahah!', 'Unstoppable!'];\n\t\n\tfunction fadeGame() {\n\t    var fadeTime = arguments.length <= 0 || arguments[0] === undefined ? 2000 : arguments[0];\n\t\n\t    _storeJs.state.state = 'finished';\n\t    (0, _visionJs.addEffect)(_storeJs.state, 0x000000, 1);\n\t    _storeJs.state.effect.alpha = 0;\n\t    _storeJs.state.game.add.tween(_storeJs.state.effect).to({ alpha: 1 }, fadeTime, \"Linear\", true);\n\t}\n\t\n\tfunction wonLevel1() {\n\t    _storeJs.state.game.createdSounds.harp.play();\n\t    fadeOutPositionalSounds();\n\t    (0, _gameJs.playSong)('song');\n\t    fadeGame();\n\t    (0, _interfaceJs.openPage)('end1', false);\n\t}\n\t\n\tfunction introLevel1() {\n\t    if (_storeJs.state.playIntro) (0, _interfaceJs.openPage)('controls');else startLevel();\n\t}\n\t\n\tfunction introLevel2() {\n\t    localStorage.lastLevel = 1;\n\t    if (_storeJs.state.playIntro) {\n\t        (0, _interfaceJs.hideInterface)();\n\t        (0, _gameJs.stopSong)(1000);\n\t        _storeJs.state.game.createdSounds.darkSpell.play();\n\t        _storeJs.state.game.createdSounds.darkSpell.onStop.add(function () {\n\t            _storeJs.state.game.createdSounds.darkSpell.onStop.removeAll();\n\t            (0, _randPosJs.randomizePresencePositions)(_storeJs.state.position);\n\t            (0, _interfaceJs.openPage)('l2intro', false);\n\t            (0, _gameJs.playSong)('darkSong', 1000);\n\t        });\n\t    } else {\n\t        (0, _randPosJs.randomizePresencePositions)(_storeJs.state.position);\n\t        startLevel();\n\t    }\n\t}\n\t\n\tfunction fadeOutPositionalSounds() {\n\t    // Move player up so should not hear positional sounds.\n\t    var oldPos = _storeJs.state.position;\n\t    var posSetter = function posSetter(pos) {\n\t        return (0, _audioJs.setListenerPos)(_storeJs.state.game.sound.context, pos);\n\t    };\n\t    (0, _movementJs.tweenPos)(oldPos, [oldPos[0], oldPos[1], 10], posSetter, 1000, _storeJs.state, 'Move');\n\t}\n\t\n\tfunction wonLevel2() {\n\t    _storeJs.state.state = 'finished';\n\t    fadeOutPositionalSounds();\n\t    _storeJs.state.game.createdSounds.end2.play();\n\t    _storeJs.state.game.createdSounds.end2.onStop.add(function () {\n\t        _storeJs.state.game.createdSounds.end2.onStop.removeAll();\n\t        fadeGame(1000);\n\t        (0, _interfaceJs.openPage)('l2end1', false);\n\t        (0, _gameJs.playSong)('song');\n\t    });\n\t}\n\t\n\tfunction lostLevel2() {\n\t    _storeJs.state.game.createdSounds.rarr.play();\n\t    fadeGame(1000);\n\t    _storeJs.state.playIntro = false;\n\t    (0, _interfaceJs.openPage)('lost2', false, darkPresencePhrases[(0, _utilsJs.randInt)(darkPresencePhrases.length)]);\n\t    // game.sound.masterGain\n\t    fadeOutPositionalSounds();\n\t}\n\t\n\tfunction loadLevel(n) {\n\t    _storeJs.state.level = n;\n\t    _storeJs.state.position = [4, 4, 0];\n\t    _storeJs.state.followed = [];\n\t    _storeJs.state.power = [];\n\t    if (n == 1) {\n\t        (0, _randPosJs.randomizePresencePositions)(_storeJs.state.position);\n\t        _storeJs.state.won = wonLevel1;\n\t        _storeJs.state.intro = introLevel1;\n\t        _storeJs.state.tint = 0xffffff;\n\t        _storeJs.state.filters = [];\n\t        _storeJs.state.onMoved = _gameJs.openTutWhenInPresence;\n\t    } else if (n == 2) {\n\t        _storeJs.state.won = wonLevel2;\n\t        _storeJs.state.lost = lostLevel2;\n\t        _storeJs.state.intro = introLevel2;\n\t        _storeJs.state.tint = 0x202020;\n\t        _storeJs.state.filters = [_storeJs.state.game.createdFilters.gray];\n\t        _storeJs.state.onMoved = function () {\n\t            return (0, _movementJs.changeDarkPresencePos)(_storeJs.state.position, _gameJs.touchedDarkPresence);\n\t        };\n\t\n\t        // Disable tutorial\n\t        _storeJs.state.tutorial = 0;\n\t    }\n\t}\n\t\n\tfunction startLevel() {\n\t    var checkTut = arguments.length <= 0 || arguments[0] === undefined ? true : arguments[0];\n\t\n\t    (0, _interfaceJs.hideInterface)();\n\t    (0, _movementJs.initPlayerPos)();\n\t    (0, _createAudiosJs.createPositionedAudios)();\n\t    _storeJs.state.state = 'starting';\n\t    (0, _visionJs.loadVision)(_storeJs.state);\n\t    if (checkTut) (0, _tutorialJs.checkTutorial)(_tutorialJs.TUTORIAL_PHASES.startingGame);\n\t}\n\t\n\tfunction pickLevel(n) {\n\t    var playSound = arguments.length <= 1 || arguments[1] === undefined ? true : arguments[1];\n\t\n\t    loadLevel(n);\n\t    _storeJs.state.intro();\n\t    if (playSound) (0, _gameJs.playButtonSound)();\n\t}\n\n/***/ },\n/* 31 */\n/*!***********************!*\\\n  !*** ./src/loader.js ***!\n  \\***********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\texports.mainLoad = mainLoad;\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _movementJs = __webpack_require__(/*! ./movement.js */ 15);\n\t\n\tvar _interfaceJs = __webpack_require__(/*! ./interface.js */ 7);\n\t\n\tvar _inputJs = __webpack_require__(/*! ./input.js */ 29);\n\t\n\tvar _createAudiosJs = __webpack_require__(/*! ./createAudios.js */ 13);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tvar _gameJs = __webpack_require__(/*! ./game.js */ 14);\n\t\n\tvar _visionJs = __webpack_require__(/*! ./vision.js */ 8);\n\t\n\tvar _levelsJs = __webpack_require__(/*! ./levels.js */ 30);\n\t\n\tvar _tutorialJs = __webpack_require__(/*! ./tutorial.js */ 16);\n\t\n\tfunction mainLoad() {\n\t    _storeJs.state.game.load.onLoadStart.add(function () {\n\t        console.log('Loading...');\n\t    }, this);\n\t\n\t    _storeJs.state.game.load.onLoadComplete.add(function () {\n\t        console.log('Done loading');\n\t        _storeJs.state.game.load.onLoadStart.removeAll();\n\t        _storeJs.state.game.load.onLoadComplete.removeAll();\n\t        mainInit();\n\t    }, this);\n\t\n\t    var firstImg = (0, _utilsJs.posDirToText)(_storeJs.state.position, _storeJs.state.direction);\n\t    _storeJs.state.game.load.image(firstImg, 'assets/map/' + firstImg + '.jpg');\n\t\n\t    _storeJs.state.game.load.audio('button', ['assets/audio/button.ogg']);\n\t    _storeJs.state.game.load.audio('stream', ['assets/audio/stream_cold.ogg']);\n\t    _storeJs.state.game.load.audio('wind', ['assets/audio/wind.ogg']);\n\t    _storeJs.state.game.load.audio('fire', ['assets/audio/fire.ogg']);\n\t    _storeJs.state.game.load.audio('earth', ['assets/audio/earth.ogg']);\n\t    _storeJs.state.game.load.audio('magic', ['assets/audio/magic_slow.ogg']);\n\t    _storeJs.state.game.load.audio('magic_request', ['assets/audio/magic_request.ogg']);\n\t    _storeJs.state.game.load.audio('magic_arrived', ['assets/audio/magic_arrived.ogg']);\n\t    _storeJs.state.game.load.audio('magic_no', ['assets/audio/magic_no.ogg']);\n\t    _storeJs.state.game.load.audio('harp', ['assets/audio/harp.ogg']);\n\t    _storeJs.state.game.load.audio('harp_start', ['assets/audio/harp_start.ogg']);\n\t    _storeJs.state.game.load.audio('steps', ['assets/audio/steps.ogg']);\n\t    _storeJs.state.game.load.audio('dark_spell', ['assets/audio/dark_spell.ogg']);\n\t    _storeJs.state.game.load.audio('dark_presence', ['assets/audio/dark_presence.ogg']);\n\t    _storeJs.state.game.load.audio('dark_song', ['assets/audio/dark_song.ogg']);\n\t    _storeJs.state.game.load.audio('rarr', ['assets/audio/rarr.ogg']);\n\t    _storeJs.state.game.load.audio('end2', ['assets/audio/end2.ogg']);\n\t\n\t    _storeJs.state.game.load.script('gray', 'vendor/Gray.js');\n\t\n\t    _storeJs.state.game.load.start();\n\t}\n\t\n\t// First init called. Should be called only once, and before any level.\n\tfunction mainInit() {\n\t    (0, _interfaceJs.hideLoadingScreen)();\n\t\n\t    _storeJs.state.game.stage.backgroundColor = '#000000';\n\t    // Used to render some things always in front of others\n\t    _storeJs.state.layers = {\n\t        back: _storeJs.state.game.add.group(),\n\t        front: _storeJs.state.game.add.group()\n\t    };\n\t\n\t    _storeJs.state.onSetVision = _gameJs.onSetVision;\n\t    (0, _visionJs.resize)();\n\t\n\t    // initialize state presences (needed to later randomize them)\n\t    for (var k in _storeJs.shrines) {\n\t        _storeJs.state.presences[k] = {};\n\t    }\n\t\n\t    _storeJs.state.game.createdFilters = { gray: _storeJs.state.game.add.filter('Gray') };\n\t    (0, _createAudiosJs.createCommonAudios)();\n\t    (0, _inputJs.initKeyboardInput)(_movementJs.move, _gameJs.interact);\n\t    (0, _inputJs.initMouseInput)(_movementJs.move, _gameJs.interact);\n\t\n\t    if (!localStorage.getItem('lastLevel')) {\n\t        // No level unlocked\n\t        (0, _levelsJs.pickLevel)(1, false);\n\t\n\t        // TODO: only for debug, comment!\n\t        // startLevel()\n\t    } else {\n\t            // Level 2 unlocked\n\t            (0, _interfaceJs.openPage)('mainmenu', false);\n\t        }\n\t}\n\t\n\t// Exported functions, so interface can call them\n\twindow.openPage = _interfaceJs.openPage;\n\twindow.pickLevel = _levelsJs.pickLevel;\n\twindow.startLevel = _levelsJs.startLevel;\n\twindow.closeTutMsg = _tutorialJs.closeTutMsg;\n\twindow.playButtonSound = _gameJs.playButtonSound;\n\n/***/ },\n/* 32 */\n/*!************************!*\\\n  !*** ./src/randPos.js ***!\n  \\************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, '__esModule', {\n\t    value: true\n\t});\n\t\n\tvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\t\n\texports.randomizePresencePositions = randomizePresencePositions;\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\t\n\tvar _assetsMapMapJs = __webpack_require__(/*! ../assets/map/map.js */ 22);\n\t\n\tvar _assetsMapMapJs2 = _interopRequireDefault(_assetsMapMapJs);\n\t\n\tvar _utilsJs = __webpack_require__(/*! ./utils.js */ 3);\n\t\n\tvar _storeJs = __webpack_require__(/*! ./store.js */ 1);\n\t\n\tfunction randomizePresencePositions(player_pos) {\n\t    var possible_pos = {};\n\t    var array_pos = [];\n\t\n\t    // No presence arrived yet\n\t    for (var p in _storeJs.state.presences) {\n\t        _storeJs.state.presences[p].arrived = false;\n\t    } // copy all map positions\n\t    for (var k in _assetsMapMapJs2['default']) {\n\t        possible_pos[k] = true;\n\t    } // remove positions too close to player position\n\t    deleteCube(possible_pos, player_pos, 1);\n\t\n\t    // remove positions too close to shrines\n\t    for (var k in _storeJs.shrines) {\n\t        deleteCube(possible_pos, _storeJs.shrines[k].position, 2);\n\t    }\n\t\n\t    // place the dark presence\n\t    if (_storeJs.state.level == 2) {\n\t        array_pos = Object.keys(possible_pos);\n\t        _storeJs.state.darkPresence.position = (0, _utilsJs.textToPos)(array_pos[(0, _utilsJs.randInt)(array_pos.length)]);\n\t    } else {\n\t        _storeJs.state.darkPresence.position = [100, 100, 100];\n\t    }\n\t\n\t    // place presences\n\t    // Placing presences may fail for when one is placed, the others\n\t    // have less space to be placed. Try again sometimes if failed.\n\t    var failed = false;\n\t    var remainingAttempts = 10;\n\t    do {\n\t        var remaining_pos = Object.assign({}, possible_pos);\n\t        for (var k in _storeJs.shrines) {\n\t            // convert to array so can random pick an index\n\t            array_pos = Object.keys(remaining_pos);\n\t            // check if still has positions to use\n\t            if (!array_pos.length) {\n\t                // no positions left, try again?\n\t                failed = true;\n\t                console.log('ops...');\n\t            } else {\n\t                // random choice\n\t                var pos = (0, _utilsJs.textToPos)(array_pos[(0, _utilsJs.randInt)(array_pos.length)]);\n\t                // set presence to pos\n\t                _storeJs.state.presences[k].position = pos;\n\t                // remove positions too close to presence\n\t                deleteCube(remaining_pos, pos, 2);\n\t            }\n\t        }\n\t        remainingAttempts--;\n\t    } while (failed && remainingAttempts);\n\t\n\t    if (failed) {\n\t        console.log('OMG! I failed! =O');\n\t    }\n\t}\n\t\n\tfunction deleteCube(obj, center, radius) {\n\t    var _center = _slicedToArray(center, 3);\n\t\n\t    var xc = _center[0];\n\t    var yc = _center[1];\n\t    var zc = _center[2];\n\t\n\t    for (var i = xc - radius; xc + radius >= i; i++) {\n\t        for (var j = yc - radius; yc + radius >= j; j++) {\n\t            for (var k = zc - radius; zc + radius >= k; k++) {\n\t                delete obj[(0, _utilsJs.posToText)([i, j, k])];\n\t            }\n\t        }\n\t    }\n\t}\n\n/***/ },\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */,\n/* 45 */,\n/* 46 */,\n/* 47 */,\n/* 48 */,\n/* 49 */,\n/* 50 */,\n/* 51 */,\n/* 52 */,\n/* 53 */,\n/* 54 */,\n/* 55 */,\n/* 56 */,\n/* 57 */,\n/* 58 */\n/*!********************************!*\\\n  !*** ./src/pages/cantsee.html ***!\n  \\********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>But here comes the tricky part: you can't see the presences. You can only hear them.\\n    And that is also how you'll need to find out which presence belongs to which shrine.</p>\\n<p>One last tip: once you gain the power to communicate with a presence, you lose the power to communicate with the others.</p>\\n<a onClick=\\\"window.openPage('instructions')\\\">Back</a>\\n<a onClick=\\\"window.startLevel()\\\">Ok! Here I go!</a>\\n\"\n\n/***/ },\n/* 59 */\n/*!*********************************!*\\\n  !*** ./src/pages/controls.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>In this game you will need to be guided by sounds. So a headphone is <b>highly</b> recommended.</p>\\n<p>It's also <b>highly</b> recommended to play it using a recent Firefox or Chromium/Chrome. Firefox seems to play the sounds better.</p>\\n<p>Use the <b>arrow keys</b> to walk and the <b>spacebar</b> to interact.\\nOr click or touch the top/bottom parts of the screen to walk forward/backward and the left/right to rotate. Click/tap the middle of the screen to interact.</p>\\n<a onClick=\\\"window.openPage('instrorstart')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 60 */\n/*!********************************!*\\\n  !*** ./src/pages/credits.html ***!\n  \\********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>This is a free software game!</p>\\n<p>Made by: Andrés M. R. Martano</p>\\n<p>Based on works from many others.</p>\\n\\n<ul>\\n  <li>\\n    <a href=\\\"https://github.com/andresmrm/labyrimental\\\" target=\\\"_blank\\\">Check full credits and source repository.</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.openPage('mainmenu')\\\">Main menu</a>\\n  </li>\\n<ul>\\n\"\n\n/***/ },\n/* 61 */\n/*!*****************************!*\\\n  !*** ./src/pages/end1.html ***!\n  \\*****************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Wow! Congratulations!</p>\\n<p>You helped the presenses! They are very grateful!</p>\\n<a onClick=\\\"window.pickLevel(2)\\\">Yay!</a>\\n\"\n\n/***/ },\n/* 62 */\n/*!********************************!*\\\n  !*** ./src/pages/history.html ***!\n  \\********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>This magic labyrinth has four elemental shrines, each inhabited by an elemental presence.\\nA powerfull spell casted nearby shaked the land, confusing the presences and spreading them around the labyrinth. Now they need your help to guide them back to their shrines.</p>\\n<a onClick=\\\"window.openPage('instructions')\\\">Next</a>\\n\"\n\n/***/ },\n/* 63 */\n/*!*************************************!*\\\n  !*** ./src/pages/instrorstart.html ***!\n  \\*************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Do you want to read the instructions or find out how to play by yourself?</p>\\n<a onClick=\\\"window.openPage('history')\\\">I don't want to guess how to play this weird game. Show me the instructions.</a>\\n<a onClick=\\\"window.startLevel(false)\\\">Challenge is my second name. Just start the game.</a>\\n\"\n\n/***/ },\n/* 64 */\n/*!*************************************!*\\\n  !*** ./src/pages/instructions.html ***!\n  \\*************************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Before you can help one of the presences, you need to visit her shrine. There you will gain the power to communicate with her. After that you need to find the presence around the labyrinth, stay very close and interact, calling her to follow you. Then you can bring her back to her shrine.</p>\\n<a onClick=\\\"window.openPage('history')\\\">Back</a>\\n<a onClick=\\\"window.openPage('cantsee')\\\">Next</a>\\n\"\n\n/***/ },\n/* 65 */\n/*!*******************************!*\\\n  !*** ./src/pages/l2end1.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>We did it! United the elemental presences could communicate with the dark presence and lessen her anger.</p>\\n<a onClick=\\\"window.openPage('l2end2')\\\">Great!</a>\\n\"\n\n/***/ },\n/* 66 */\n/*!*******************************!*\\\n  !*** ./src/pages/l2end2.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>It seems she's angry because of the powerfull spells casted recently and she thought you're the one responsible for them.</p>\\n<p>Maybe it's time to find out who is behind all this...</p>\\n<a onClick=\\\"window.openPage('l2end3')\\\">...</a>\\n\"\n\n/***/ },\n/* 67 */\n/*!*******************************!*\\\n  !*** ./src/pages/l2end3.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Continue?</p>\\n<a onClick=\\\"window.openPage('credits')\\\">End</a>\\n\"\n\n/***/ },\n/* 68 */\n/*!********************************!*\\\n  !*** ./src/pages/l2intro.html ***!\n  \\********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Uh oh...</p>\\n<a onClick=\\\"window.openPage('l2intro2')\\\">WHAT WAS THAT?</a>\\n<a onClick=\\\"window.openPage('l2intro2')\\\">Not again...</a>\\n\"\n\n/***/ },\n/* 69 */\n/*!*********************************!*\\\n  !*** ./src/pages/l2intro2.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>It seems a powerfull spell was casted again. But this time, it unleashed a... dark presence.</p>\\n<p>What are we going to do now?</p>\\n<a onClick=\\\"window.openPage('l2intro3')\\\">Hey! You're the one supposed to tell me that!</a>\\n<a onClick=\\\"window.startLevel()\\\">Just stay out of the way and I'll solve it quick.</a>\\n\"\n\n/***/ },\n/* 70 */\n/*!*********************************!*\\\n  !*** ./src/pages/l2intro3.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Hum... Ok... Don't panic.</p>\\n<p>After the powerfull spell was casted again, the four elemental presences should be spread across the labyrinth once again. But maybe, if you can unite them, they can do something about it.</p>\\n<a onClick=\\\"window.openPage('l2intro3a')\\\">They can't even find the way back to their shines!</a>\\n<a onClick=\\\"window.openPage('l2intro4')\\\">Ok...</a>\\n\"\n\n/***/ },\n/* 71 */\n/*!**********************************!*\\\n  !*** ./src/pages/l2intro3a.html ***!\n  \\**********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Hey! Don't underestimate the presences! Besides, I have no other idea...</p>\\n<a onClick=\\\"window.openPage('l2intro4')\\\">Great...</a>\\n\"\n\n/***/ },\n/* 72 */\n/*!*********************************!*\\\n  !*** ./src/pages/l2intro4.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Ok, so first you'll need to enter each of the four shines again, to gain the hability to communicate with each presence. This time, given the circustances, you should be able to accumulate the power to communicate with all of them at the same time. Then find them around the labyrinth.</p>\\n<a onClick=\\\"window.openPage('l2intro5')\\\">...</a>\\n\"\n\n/***/ },\n/* 73 */\n/*!*********************************!*\\\n  !*** ./src/pages/l2intro5.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Be cautious: don't face the dark presence before you have all the four elemental presences with you. Like the others, you can't see the dark presence, but I'm sure you'll know when she is close. Run. And don't forget: she can pass through walls and she seems ANGRY.</p>\\n<a onClick=\\\"window.startLevel()\\\">...</a>\\n\"\n\n/***/ },\n/* 74 */\n/*!******************************!*\\\n  !*** ./src/pages/lost2.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>{{}}</p>\\n<ul>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(2)\\\">Restart</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.openPage('mainmenu')\\\">Main menu</a>\\n  </li>\\n<ul>\\n\"\n\n/***/ },\n/* 75 */\n/*!*********************************!*\\\n  !*** ./src/pages/mainmenu.html ***!\n  \\*********************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Select a level:</p>\\n<ul>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(1)\\\">Level 1</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(2)\\\">Level 2</a>\\n  </li>\\n<ul>\\n\"\n\n/***/ },\n/* 76 */\n/*!******************************!*\\\n  !*** ./src/pages/tut1a.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>So, first you need to find a shrine...</p>\\n<a onClick=\\\"window.openPage('tut1b')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 77 */\n/*!******************************!*\\\n  !*** ./src/pages/tut1b.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Use the arrow keys or click on the borders of the screen to move.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n/***/ },\n/* 78 */\n/*!******************************!*\\\n  !*** ./src/pages/tut2a.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Great! You found the {{}} shrine!</p>\\n<a onClick=\\\"window.openPage('tut2b', true, '{{}}')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 79 */\n/*!******************************!*\\\n  !*** ./src/pages/tut2b.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Now you can communicate with the {{}} presence. But first you need to find it.</p>\\n<a onClick=\\\"window.openPage('tut2c')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 80 */\n/*!******************************!*\\\n  !*** ./src/pages/tut2c.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Search the labyrinth for a sound similar to the one you hear here.</p>\\n<a onClick=\\\"window.openPage('tut2d')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 81 */\n/*!******************************!*\\\n  !*** ./src/pages/tut2d.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>You'll need to get <b>very</b> close to it.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n/***/ },\n/* 82 */\n/*!*******************************!*\\\n  !*** ./src/pages/tut2xa.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>You entered the {{}} shrine.</p>\\n<a onClick=\\\"window.openPage('tut2xb', true, '{{}}')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 83 */\n/*!*******************************!*\\\n  !*** ./src/pages/tut2xb.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>You lost the power to communicate with the previous presence...</p>\\n<a onClick=\\\"window.openPage('tut2xc', true, '{{}}')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 84 */\n/*!*******************************!*\\\n  !*** ./src/pages/tut2xc.html ***!\n  \\*******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>But you can now communicate with the {{}} presence.</p>\\n<a onClick=\\\"window.openPage('tut2c')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 85 */\n/*!******************************!*\\\n  !*** ./src/pages/tut3a.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Can you hear that? You're very close to the {{}} presence.</p>\\n<a onClick=\\\"window.openPage('tut3b')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 86 */\n/*!******************************!*\\\n  !*** ./src/pages/tut3b.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Press the space bar or click on the middle of the screen to call her.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n/***/ },\n/* 87 */\n/*!******************************!*\\\n  !*** ./src/pages/tut4a.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Great! The {{}} presence heard your call and is now following you.</p>\\n<a onClick=\\\"window.openPage('tut4b', true, '{{}}')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 88 */\n/*!******************************!*\\\n  !*** ./src/pages/tut4b.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Now you need to bring her to the {{}} shrine.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n/***/ },\n/* 89 */\n/*!******************************!*\\\n  !*** ./src/pages/tut5a.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Well done! The {{}} presence is happy back to her shrine!</p>\\n<a onClick=\\\"window.openPage('tut5b')\\\">Ok</a>\\n\"\n\n/***/ },\n/* 90 */\n/*!******************************!*\\\n  !*** ./src/pages/tut5b.html ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<p>Now you need to do the same for the other three presences. Good luck!</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n/***/ },\n/* 91 */,\n/* 92 */\n/*!****************************!*\\\n  !*** ./src/pages ^\\.\\/.*$ ***!\n  \\****************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar map = {\n\t\t\"./cantsee.html\": 58,\n\t\t\"./controls.html\": 59,\n\t\t\"./credits.html\": 60,\n\t\t\"./end1.html\": 61,\n\t\t\"./history.html\": 62,\n\t\t\"./instrorstart.html\": 63,\n\t\t\"./instructions.html\": 64,\n\t\t\"./l2end1.html\": 65,\n\t\t\"./l2end2.html\": 66,\n\t\t\"./l2end3.html\": 67,\n\t\t\"./l2intro.html\": 68,\n\t\t\"./l2intro2.html\": 69,\n\t\t\"./l2intro3.html\": 70,\n\t\t\"./l2intro3a.html\": 71,\n\t\t\"./l2intro4.html\": 72,\n\t\t\"./l2intro5.html\": 73,\n\t\t\"./lost2.html\": 74,\n\t\t\"./mainmenu.html\": 75,\n\t\t\"./tut1a.html\": 76,\n\t\t\"./tut1b.html\": 77,\n\t\t\"./tut2a.html\": 78,\n\t\t\"./tut2b.html\": 79,\n\t\t\"./tut2c.html\": 80,\n\t\t\"./tut2d.html\": 81,\n\t\t\"./tut2xa.html\": 82,\n\t\t\"./tut2xb.html\": 83,\n\t\t\"./tut2xc.html\": 84,\n\t\t\"./tut3a.html\": 85,\n\t\t\"./tut3b.html\": 86,\n\t\t\"./tut4a.html\": 87,\n\t\t\"./tut4b.html\": 88,\n\t\t\"./tut5a.html\": 89,\n\t\t\"./tut5b.html\": 90\n\t};\n\tfunction webpackContext(req) {\n\t\treturn __webpack_require__(webpackContextResolve(req));\n\t};\n\tfunction webpackContextResolve(req) {\n\t\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n\t};\n\twebpackContext.keys = function webpackContextKeys() {\n\t\treturn Object.keys(map);\n\t};\n\twebpackContext.resolve = webpackContextResolve;\n\tmodule.exports = webpackContext;\n\twebpackContext.id = 92;\n\n\n/***/ }\n]);\n\n\n// WEBPACK FOOTER //\n// app.js","// ---------------------------------------------------------\n// Copyright (C) 2016  Andrés M. R. Martano\n//\n//     This program is free software: you can redistribute it and/or modify\n// it under the terms of the GNU Affero General Public License as\n// published by the Free Software Foundation, either version 3 of the\n// License, or (at your option) any later version.\n//\n//     This program is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU Affero General Public License for more details.\n//\n//     You should have received a copy of the GNU Affero General Public License\n// along with this program.  If not, see <http://www.gnu.org/licenses/>.\n// ---------------------------------------------------------\n\n\nimport {mainLoad} from './loader.js'\nimport {playSong} from './game.js'\nimport {state} from './store.js'\n\nfunction preload() {\n    //state.game.stage.disableVisibilityChange = true\n\n    state.game.load.audio('song', ['assets/audio/song.ogg'])\n}\n\nfunction create() {\n    var song = state.game.add.audio('song', 1, true)\n    state.game.sound.setDecodedCallback([song], () => playSong('song'), this)\n    state.game.createdSounds = {song}\n\n    state.game.load.crossOrigin = 'anonymous'\n\n    // TODO: mainLoad needs to be called via setTimeout, no idea why...\n    // If called directly loader stops in the middle.\n    // mainLoad()\n    setTimeout(mainLoad, 10)\n}\n\nfunction update() {\n}\n\nstate.game = new Phaser.Game(0, 0, Phaser.AUTO, 'app',\n                           { preload: preload,\n                             create: create,\n                             update: update })\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","export var shrines = {\n    water: {\n        position: [10, 0, 0],\n        walkablePos: [9, 0, 0],\n        soundName: 'stream',\n        gain: 15,\n        // color: 0x0000ff,\n        color: 0x00376e,\n    },\n    earth: {\n        position: [8, 10, 0],\n        walkablePos: [8, 9, 0],\n        soundName: 'earth',\n        gain: 2,\n        // color: 0xa16020,\n        color: 0x376e00,\n    },\n    air: {\n        position: [0, -2, 0],\n        walkablePos: [0, -1, 0],\n        soundName: 'wind',\n        gain: 4,\n        // color: 0xaaaaaa,\n        color: 0x3a0371,\n    },\n    fire: {\n        position: [-2, 7, 0],\n        walkablePos: [-1, 7, 0],\n        soundName: 'fire',\n        gain: 4,\n        // color: 0xff0000,\n        color: 0x6e3700,\n    }\n}\n\nexport var state = {\n    state: 'pregame',\n    level: 1,\n    position: [4, 4, 0],\n    direction: 'e',\n    followed: [],\n    presences: {},\n    darkPresence: {},\n    power: [],\n    filters: [],\n    tint: null,\n    // if is waiting the load of an image for the vision\n    loadingVision: false,\n    // if should play intro or skip it\n    playIntro: true,\n    // current playing or last played song\n    currentSong: null,\n    // if should animate player moves\n    animateMove: false,\n    tutorial: 1,\n}\n\n\n// Debug TODO: remover?\nwindow.s = state\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js","var directions = ['n', 'e', 's', 'w']\n\n// Return a random int from 0 to x-1\nexport function randInt(x) {\n    return Math.floor(Math.random() * (x))\n}\n\n// Check if two arrays have the same numbers in the same order\nexport function equalArrays(a1, a2) {\n    var equal = true\n    for (let i in a1) {\n        if (a1[i] != a2[i]) {\n            equal = false\n            break\n        }\n    }\n    return equal\n}\n\n// Converts a text to a position. e.g.: '2_4_5' -> [2,4,5]\nexport function textToPos(t) {\n    return t.split('_').map((x)=>parseInt(x))\n}\n\n// Converts a position to text. e.g.: [2,4,5] -> '2_4_5'\nexport function posToText(pos) {\n    return pos.join('_')\n}\n\n// Converts a position and a direction to text. e.g.: [2,4,5], 'n' -> '2_4_5_n'\nexport function posDirToText(pos, direction) {\n    return posToText(pos) + '_' + direction\n}\n\n// Returns eclidean distance between 2 positions\nexport function posDist(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n                     Math.pow(p1[1] - p2[1], 2) +\n                     Math.pow(p1[2] - p2[2], 2))\n}\n\n// Returns a rotated direction to the left\nexport function rotLeft(dir) {\n    if (dir == 'n') return 'w'\n    else return directions[directions.indexOf(dir) - 1]\n}\n\n// Returns a rotated direction to the right\nexport function rotRight(dir) {\n    if (dir == 'w') return 'n'\n    else return directions[directions.indexOf(dir) + 1]\n}\n\n// Returns the oposite direction\nexport function rot180(dir) {\n    return rotLeft(rotLeft(dir))\n}\n\nexport function getBounds(obj) {\n    return [obj.x, obj.y, obj.width, obj.height]\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","// Require all pages in ./pages and populate a dict where the values\n// are the text contents\nvar req = require.context('./pages')\nvar pages = {}\nreq.keys().forEach(k => {\n    // for each file use only the filename, without extension, as key\n    var k2 = k.split('/')\n    k2 = k2[k2.length-1].split('.')\n    k2 = k2[k2.length-2]\n    pages[k2] = req(k)\n})\n\n\nfunction getDiv(outer=false) {\n    if (outer) return document.getElementById('interface-outer')\n    else return document.getElementById('interface-menus')\n}\n\nexport function setInterfaceBounds(bounds) {\n    var outer = getDiv(true)\n    bounds.map(\n            function (val, index) { outer.style[this[index]] = val + 'px'},\n            [\"left\", \"top\", \"width\", \"height\"])\n\n    getDiv().style.padding = `${bounds[2]/8}px ${bounds[3]/8}px`\n}\n\nexport function openPage(name, playSound=true, replace=null) {\n    showInterface()\n    var text = pages[name]\n    if (replace)\n        text = text.replace(/\\{\\{\\}\\}/g, replace)\n    getDiv().innerHTML = `<div class=\"page\">${text}</div>`\n    if (playSound) window.playButtonSound()\n    window.scrollTo(0, 0)\n}\n\nexport function showInterface() {\n    var inter = getDiv()\n    inter.style.zIndex = 1\n    inter.style.opacity = 1\n    var outer = getDiv(true)\n    outer.style.pointerEvents = 'auto'\n}\n\nexport function hideInterface() {\n    var inter = getDiv()\n    inter.style.zIndex = -1\n    inter.style.opacity = 0\n    inter.innerHTML = ''\n    var outer = getDiv(true)\n    outer.style.pointerEvents = 'none'\n}\n\nexport function hideLoadingScreen() {\n    var el = document.getElementById('loading-screen')\n    if (el) el.parentNode.removeChild(el)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/interface.js","import {posDirToText, getBounds} from './utils.js'\nimport {setInterfaceBounds} from './interface.js'\nimport {state} from './store.js'\n\n\nfunction setVision(isResize=false, move=null) {\n    if (!isResize) state.loadingVision = false\n\n    if (!move || !state.animateMove) {\n        // Move without animation\n        if (state.img) state.img.destroy()\n        state.img = state.game.add.image(0, 0, posDirToText(state.position, state.direction))\n        state.layers.back.add(state.img)\n        var r = Math.min(state.game.width/state.img.width, state.game.height/state.img.height)\n        state.img.scale.setTo(r)\n        state.img.x = (state.game.width - state.img.width) / 2\n        state.img.y = (state.game.height - state.img.height) / 2\n    } else {\n        var newImg = state.game.add.image(0, 0, posDirToText(state.position, state.direction))\n        state.layers.back.add(newImg)\n        var r2 = Math.min(state.game.width/newImg.width, state.game.height/newImg.height)\n        newImg.scale.setTo(r2)\n        var zero_x = (state.game.width - state.img.width) / 2\n        var zero_y = (state.game.height - state.img.height) / 2\n        newImg.x = zero_x\n        newImg.y = zero_y\n        // Round bounds\n        var bounds2 = ['x', 'y', 'width', 'height']\n        bounds2.map((key) => newImg[key] = Math.round(newImg[key]))\n\n        var tween = null\n        var tweenNew = null\n\n        if (move == 'RIGHT') {\n            newImg.x = zero_x + state.img.width\n            tweenNew = state.game.add.tween(newImg).to({x:zero_x}, 1000, \"Linear\")\n            tween = state.game.add.tween(state.img).to({x:zero_x-state.img.width}, 1000, \"Linear\")\n        } else if (move == 'LEFT') {\n            newImg.x = zero_x - newImg.width\n            tweenNew = state.game.add.tween(newImg).to({x:zero_x}, 1000, \"Linear\")\n            tween = state.game.add.tween(state.img).to({x:zero_x+state.img.width}, 1000, \"Linear\")\n        } else if (move == 'UP') {\n            state.layers.front.add(state.img)\n            newImg.x = zero_x + newImg.width/4\n            newImg.y = zero_y + newImg.height/4\n            var h = newImg.height\n            var w = newImg.width\n            newImg.height = h/2\n            newImg.width = w/2\n            tweenNew = state.game.add.tween(newImg).to({x:zero_x, y:zero_y, height:h, width:w}, 1000, \"Linear\")\n            tween = state.game.add.tween(state.img).to({alpha:0}, 1000, \"Linear\")\n        } else if (move == 'DOWN') {\n            // state.layers.front.add(state.img)\n            newImg.alpha = 0\n            tweenNew = state.game.add.tween(newImg).to({alpha:1}, 1000, \"Linear\")\n            tween = state.game.add.tween(state.img).to({\n                x:zero_x + state.img.width/4,\n                y:zero_y + state.img.height/4,\n                height:state.img.height/2,\n                width:state.img.width/2\n            }, 1000, \"Linear\")\n        }\n\n        tweenNew.start()\n        tween.start()\n        tween.onComplete.add(() => {\n            if (state.img) state.img.destroy()\n            state.img = newImg\n            tween.onComplete.removeAll()\n        })\n    }\n\n    // if (state.img) state.img.destroy()\n    // state.img = state.game.add.image(0, 0, posDirToText(state.position, state.direction))\n    // state.layers.back.add(state.img)\n    // var r = Math.min(state.game.width/state.img.width, state.game.height/state.img.height)\n    // state.img.scale.setTo(r)\n    // state.img.x = (state.game.width - state.img.width) / 2\n    // state.img.y = (state.game.height - state.img.height) / 2\n\n    // Round bounds\n    var bounds = ['x', 'y', 'width', 'height']\n    bounds.map((key) => state.img[key] = Math.round(state.img[key]))\n\n    // Set tint\n    if (state.tint) state.img.tint = state.tint\n    // Set filter\n    if (state.filters.length) state.img.filters = state.filters\n\n    // Map img bounds to interface\n    setInterfaceBounds(getBounds(state.img))\n\n    // Enable mouse move\n    if (state.onTap) {\n        state.img.inputEnabled = true\n        state.img.events.onInputUp.add(state.onTap, this)\n    }\n\n    if (state.onSetVision) state.onSetVision(isResize)\n}\n\nexport function addEffect(state, color, alpha) {\n    if (state.effect) state.effect.destroy()\n    state.effect = state.game.add.graphics(0, 0)\n    state.effect.beginFill(color, alpha)\n    state.effect.drawRect(state.img.x, state.img.y, state.img.width, state.img.height)\n    state.effect.endFill()\n    state.layers.front.add(state.effect)\n    return state.effect\n}\n\nexport function loadVision(state, move=null) {\n    var s = posDirToText(state.position, state.direction)\n    if (!state.game.cache.checkImageKey(s)) {\n        state.loadingVision = true\n        var signal = state.game.load.image(s, 'assets/map/' + s + '.jpg').onFileComplete\n        signal.add(() => {\n            setVision(false, move)\n            signal.removeAll()\n        })\n        state.game.load.start()\n    } else {\n        setVision(false, move)\n    }\n}\n\nexport function resize() {\n    state.game.scale.setGameSize(window.innerWidth, window.innerHeight)\n    setVision(true)\n}\n\n// Resizes game on window resize\n// based on: http://www.html5gamedevs.com/topic/13900-doubt-about-making-my-game-responsive-on-onresize/\n// The delay is supposed to help on some devices\nwindow.addEventListener('resize',\n                        () => state.game.time.events.add(200, resize),\n                        false)\n\n\n\n// WEBPACK FOOTER //\n// ./src/vision.js","var audioMult = 1\n\nexport function setListenerPos(context, pos) {\n    // The +1 avoids 0 distance. It hurts the ears.\n    context.listener.setPosition(pos[0] * audioMult, pos[2] + 1, - pos[1] * audioMult)\n}\n\nexport function setAudioOri(context, direction) {\n    var [x, y, z] = direction\n    context.listener.setOrientation(x, z, -y, 0, 1, 0)\n}\n\nexport function setPannerPos(panner, pos) {\n    var [x, y, z] = pos\n    panner.setPosition(x * audioMult, z * audioMult, - y * audioMult)\n}\n\nexport function addSound(game, position, soundName, soundGain=1) {\n    var audio = game.add.audio(soundName)\n    var panner = game.sound.context.createPanner()\n\n    panner.panningModel = 'HRTF'\n    panner.distanceModel = 'exponential'\n    panner.refDistance = 1\n    panner.maxDistance = 4\n    panner.rolloffFactor = 4\n\n    audio.gainNode.disconnect()\n    audio.gainNode.connect(panner)\n\n    // panner.connect(game.sound.masterGain)\n    var volume = game.sound.context.createGain()\n    panner.connect(volume)\n    volume.connect(game.sound.masterGain)\n    volume.gain.value = soundGain\n\n    setPannerPos(panner, position)\n    audio.loop = true\n    audio.play()\n\n    return {audio, panner, volume}\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/audio.js","import {addSound, setPannerPos} from './audio.js'\nimport {shrines, state} from './store.js'\n\n\nexport function createCommonAudios() {\n    // steps sound\n    var steps = state.game.add.audio('steps')\n    steps.allowMultiple = true\n    for (let i = 0; i < 6; i++) {\n        steps.addMarker(i, i, 1)\n    }\n\n    // more sounds\n    Object.assign(state.game.createdSounds, {\n        steps,\n        harp: state.game.add.audio('harp', 0.8),\n        harpStart: state.game.add.audio('harp_start', 0.8),\n        button: state.game.add.audio('button', 0.5),\n        magic: state.game.add.audio('magic'),\n        magicNo: state.game.add.audio('magic_no'),\n        magicRequest: state.game.add.audio('magic_request'),\n        magicArrived: state.game.add.audio('magic_arrived'),\n        darkSpell: state.game.add.audio('dark_spell', 1.5),\n        darkSong: state.game.add.audio('dark_song', 1, true),\n        darkPresence: state.game.add.audio('dark_presence', 1, true),\n        rarr: state.game.add.audio('rarr'),\n        end2: state.game.add.audio('end2'),\n    })\n}\n\nexport function createPositionedAudios() {\n    for (let k in shrines) {\n        var shrine = shrines[k]\n        // Add shrine\n        if (!shrine.sound)\n            shrine.sound =\n                addSound(state.game, shrine.position,\n                        shrine.soundName, shrine.gain)\n\n        var presence = state.presences[k]\n        // Add presence\n        if (!presence.sound) {\n            presence.sound =\n                addSound(state.game, presence.position,\n                         shrine.soundName, shrine.gain)\n        } else {\n            setPannerPos(presence.sound.panner, presence.position)\n        }\n        changePresenceSoundGain(k, 1)\n    }\n\n    // Dark Presence\n    if (state.level == 2) {\n        var darkPres = state.darkPresence\n        if (!darkPres.sound) {\n            state.darkPresence.sound =\n                addSound(state.game, darkPres.position,\n                         'dark_presence', 1.5)\n        } else {\n            setPannerPos(darkPres.sound.panner, darkPres.position)\n            state.darkPresence.sound.volume.gain.value = 1\n        }\n    } else {\n        if (state.darkPresence.sound) {\n            state.darkPresence.sound.volume.gain.value = 0\n        }\n    }\n}\n\nexport function changePresenceSoundGain(presenceName, mult) {\n    state.presences[presenceName].sound.volume.gain.value =\n        shrines[presenceName].gain * mult\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/createAudios.js","import {equalArrays} from './utils.js'\nimport {changePresencePos} from './movement.js'\nimport {addEffect} from './vision.js'\nimport {shrines, state} from './store.js'\nimport {changePresenceSoundGain} from './createAudios.js'\nimport {checkTutorial, TUTORIAL_PHASES} from './tutorial.js'\n\n\nexport function playSong(name, fadeInTime=2000) {\n    if (state.currentSong) state.currentSong.stop()\n    state.currentSong = state.game.createdSounds[name]\n    state.currentSong.fadeIn(fadeInTime, true, '')\n}\n\nexport function stopSong(fadeOutTime=2000) {\n    if (state.currentSong && state.currentSong.isPlaying)\n        state.currentSong.fadeOut(fadeOutTime)\n}\n\n\nexport function touchedDarkPresence() {\n    if (state.followed.length == 4) state.won()\n    else state.lost()\n}\n\nexport function onSetVision(isResize) {\n\n    // Make sure that the song won't play in game.\n    if (state.state == 'playing') stopSong()\n\n    // Effects\n    if (['pregame', 'starting'].includes(state.state)) {\n        addEffect(state, 0x000000, 1)\n        if (state.state == 'starting') {\n            state.state = 'playing'\n            stopSong()\n            state.game.add.tween(state.effect)\n                .to({alpha: 0}, 2000, \"Linear\", true)\n            if (!isResize) {\n                if (state.level == 1) state.game.createdSounds.harpStart.play()\n            }\n        }\n    }\n\n\n    // var tweenBack = state.game.add.tween(effect).to( { alpha: 0 }, 1000, \"Linear\")\n    // tweenTo.chain(tweenBack)\n    // tweenTo.start()\n\n\n    if (!isResize) {\n        checkFollowPresence()\n        checkInShrine()\n    }\n}\n\nexport function interact() {\n    if (state.state == 'playing') {\n        var presence = isInPresence(state.position)\n        if (presence &&\n            state.power.includes(presence) &&\n            !state.presences[presence].arrived) {\n\n            if (state.level == 2 || !state.followed.length) {\n                // presence starts to follow player\n                state.followed.push(presence)\n                changePresenceSoundGain(presence, 0.25)\n                state.game.createdSounds.magicRequest.play()\n                if (state.level == 2) {\n                    // Gain color!\n                    state.tint += shrines[presence].color\n                    if (state.filters.length) state.filters = []\n                }\n\n                // Open tutorial dialog if needed\n                checkTutorial(TUTORIAL_PHASES.callingPresence, presence)\n\n                return true\n            }\n        }\n        state.game.createdSounds.magicNo.play()\n    }\n\n    return false\n}\n\nfunction checkFollowPresence() {\n    // if (state.followed) {\n    for (let p of state.followed) {\n        changePresencePos(state.presences[p], state.position, 2000)\n    }\n    // }\n}\n\n// Check if is in a different shrine and set player power\nfunction checkInShrine() {\n    var shrine = isInShrine(state.position)\n    if (shrine) {\n        if (state.level == 1) {\n            // If not followed and entering a shrine of different power\n            // that still hasn't its presence\n            if (!state.followed.length &&\n                !state.presences[shrine].arrived) {\n                var newPower = true\n                if (state.power.length && state.power[0] == shrine) newPower = false\n                if (newPower) {\n                    if (state.power.length) {\n                        // Changing current power\n                        checkTutorial(TUTORIAL_PHASES.changedPower, shrine)\n                    } else {\n                        // First power\n                        checkTutorial(TUTORIAL_PHASES.searchingShrine, shrine)\n                    }\n                    setPower(shrine, true)\n                }\n\n\n            // If followed by presence of the current shrine\n            } else if (state.followed.includes(shrine)) {\n                presenceArrived(state, shrine)\n\n                // Open tutorial dialog if needed\n                checkTutorial(TUTORIAL_PHASES.returningPresence, shrine)\n            }\n        } else {\n            if (!state.power.includes(shrine)) setPower(shrine)\n        }\n    }\n}\n\nfunction presenceArrived(state, presence) {\n    state.presences[presence].arrived = true\n    changePresenceSoundGain(presence, 1)\n    // Pop presence from followed\n    state.followed.splice(state.followed.indexOf(presence), 1)\n    // Pop power\n    state.power.splice(state.power.indexOf(presence), 1)\n    state.game.createdSounds.magicArrived.play()\n\n    // If all presences arrived: The end!\n    if (Object.keys(state.presences).reduce(\n        (p, c) => p && state.presences[c].arrived, true)) {\n        state.game.createdSounds.magicArrived.onStop.add(\n            function () {\n                state.won()\n                state.game.createdSounds.magicArrived.onStop.removeAll()\n            }\n        )\n    }\n}\n\n// Set player power and display effect/sound\nfunction setPower(power, replace=false) {\n    if (replace) state.power = []\n    state.power.push(power)\n\n    // visual effect when entering a different shrine\n    var effect = addEffect(state, shrines[power].color, 0.5)\n    effect.alpha = 0\n    var tweenTo = state.game.add.tween(effect).to( { alpha: 1 }, 1000, \"Linear\")\n    var tweenBack = state.game.add.tween(effect).to( { alpha: 0 }, 1000, \"Linear\")\n    tweenTo.chain(tweenBack)\n    tweenTo.start()\n    state.game.createdSounds.magic.play()\n    tweenBack.onComplete.add(() => effect.destroy())\n}\n\n// check if position is the same of a shrine\nfunction isInShrine(position) {\n    for (let k in shrines) {\n        if (equalArrays(position, shrines[k].walkablePos)) return k\n    }\n    return null\n}\n\n// check if position is the same of a presence\nfunction isInPresence(position) {\n    for (let k in state.presences) {\n        if (equalArrays(position, state.presences[k].position) &&\n            !state.followed.includes(k))\n            return k\n    }\n    return null\n}\n\nexport function openTutWhenInPresence() {\n    var presence = isInPresence(state.position)\n    if (presence && state.power.includes(presence))\n        checkTutorial(TUTORIAL_PHASES.searchingPresence, presence)\n}\n\nexport function playButtonSound() {\n    state.game.createdSounds.button.play()\n}\n\n// function createGameElements() {\n//     console.log('Creating...')\n\n//     // state.game.createdSounds.song.stop()\n//     // hideInterface()\n//     // startLevel()\n//     // setTimeout(function () {\n//     //     for (let p in state.presences) {\n//     //         state.followed = p\n//     //         presenceArrived(state)\n//     //     }\n//     // }, 2000)\n\n\n\n//     // setTimeout(function () {\n//     //     // TODO: tratar melhor qual música para/toca\n//     //     state.game.createdSounds.song.stop()\n//     //     // loadLevel2()\n//     //     // toLevel2intro()\n//     // }, 2000)\n\n//     // loadLevel2()\n//     // randomizePresencePositions(state.position)\n//     // startLevel()\n\n//     // openPage('controls', false)\n//     // openPage('instrorstart', false)\n\n//     // Debug\n//     // state.effect2 = state.game.add.graphics(0, 0)\n//     // state.effect2.beginFill(0xff0000, 1)\n//     // state.effect2.drawRect(0, 0, 10, 10)\n//     // state.effect2.endFill()\n// }\n\n\nfunction cheatLevel1() {\n    for (let p in state.presences) {\n        state.followed.push(p)\n        presenceArrived(state, p)\n    }\n}\nfunction cheatLevel2() {\n    for (let p in state.presences) {\n        state.followed.push(p)\n    }\n    // touchedDarkPresence()\n}\nwindow.cheats = {\n    l1: cheatLevel1,\n    l2: cheatLevel2\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/game.js","import map from '../assets/map/map.js'\nimport {randInt, posToText, posDist, getBounds, rotLeft, rotRight, rot180} from './utils.js'\nimport {setListenerPos, setAudioOri, setPannerPos} from './audio.js'\nimport {loadVision} from './vision.js'\nimport {state} from './store.js'\n\n\nvar walk = {\n    e: [1, 0, 0],\n    s: [0, -1, 0],\n    w: [-1, 0, 0],\n    n: [0, 1, 0],\n}\n\n\nfunction tryChangePos(direction) {\n    let newPos = map[posToText(state.position)][direction]\n    if (newPos) {\n        var oldPos = state.position\n        state.position = newPos\n        var posSetter = (pos) => setListenerPos(state.game.sound.context, pos)\n        tweenPos(oldPos, newPos, posSetter, 500, state, 'Move')\n        state.game.createdSounds.steps.play(randInt(5))\n        return true\n    }\n    return false\n}\n\nexport function changeDarkPresencePos(playerPos, fTouched) {\n    var oldPos = state.darkPresence.position\n    var posSetter = (pos) => {\n        if (state.state == 'playing') {\n            setPannerPos(state.darkPresence.sound.panner, pos)\n            state.darkPresence.position = pos\n            // state.effect2.x = pos[0] * 50\n            // state.effect2.y = pos[1] * 50\n            if (posDist(pos, state.position) < 0.5 && fTouched) fTouched()\n        }\n    }\n    var time = posDist(oldPos, playerPos) * 3500\n    tweenPos(oldPos, playerPos, posSetter, time, state.darkPresence)\n}\n\nexport function move(event, key) {\n    if (state.state == 'playing' && !state.loadingVision\n        /*&& noRecentMove(state, 1000)*/) {\n        var moved = false\n        var rotated = false\n        switch (key) {\n        case 'UP':\n            moved = tryChangePos(state.direction)\n            break\n        case 'DOWN':\n            moved = tryChangePos(rot180(state.direction))\n            break\n        case 'LEFT':\n            rotatePlayer(state, 'left')\n            rotated = true\n            break\n        case 'RIGHT':\n            rotatePlayer(state, 'right')\n            rotated = true\n            break\n        case 'A':\n            console.log('Switching Animate Move Mode')\n            state.animateMove = !state.animateMove\n        }\n        // checkTeleportation(state)\n        if (rotated || moved) loadVision(state, key)\n        if (moved && state.onMoved) state.onMoved()\n    }\n}\n\nfunction rotatePlayer(state, type) {\n    var oldPos = walk[state.direction]\n    if (type == 'left') state.direction = rotLeft(state.direction)\n    else state.direction = rotRight(state.direction)\n    var newPos = walk[state.direction]\n    var posSetter = (pos) => setAudioOri(state.game.sound.context, pos)\n    tweenPos(oldPos, newPos, posSetter, 500, state, 'Rotate')\n}\n\nexport function changePresencePos(presence, newPos, time) {\n    var oldPos = presence.position\n    presence.position = newPos\n    var posSetter = (pos) => setPannerPos(presence.sound.panner, pos)\n    tweenPos(oldPos, newPos, posSetter, time, presence)\n}\n\n// Tween a position running posSetter on each interaction.\n// Store tween in 'store', use 'tween'+extraName to name the pointer.\nexport function tweenPos(oldPos, newPos, posSetter, time, store, extraName) {\n    var [ox, oy, oz] = oldPos\n    var [nx, ny, nz] = newPos\n    var obj = {x:ox, y:oy, z:oz}\n    var tweenTo = state.game.add.tween(obj).to({x:nx, y:ny, z:nz}, time, \"Linear\")\n    var updateFunc = () => posSetter([obj.x, obj.y, obj.z])\n    tweenTo.onUpdateCallback(updateFunc)\n    tweenTo.onComplete.add(updateFunc)\n    tweenTo.start()\n    // Remove old tween, save pointer to new tween\n    if (store) {\n        var name = 'tween'\n        if (extraName) name += extraName\n        if (store[name]) store[name].stop()\n        store[name] = tweenTo\n    }\n}\n\nexport function initPlayerPos() {\n    setListenerPos(state.game.sound.context, state.position)\n    setAudioOri(state.game.sound.context, walk[state.direction])\n}\n\n// function noRecentMove(state, time) {\n//     var currTime = new Date().getTime()\n//     if (state.lastMoveTime) {\n//         if (Math.abs(currTime - state.lastMoveTime) < time) return false\n//     }\n//     state.lastMoveTime = currTime\n//     return true\n// }\n\n\n\n// WEBPACK FOOTER //\n// ./src/movement.js","import {state} from './store.js'\nimport {hideInterface, openPage} from './interface.js'\n\n\nexport var TUTORIAL_PHASES = {\n    startingGame: 1,\n    searchingShrine: 2,\n    searchingPresence: 3,\n    changedPower: '2x',\n    callingPresence: 4,\n    returningPresence: 5,\n}\n\n\nexport function closeTutMsg() {\n    hideInterface()\n    state.tutorial += 1\n}\n\nexport function checkTutorial(phase, replace=null) {\n    if (phase == state.tutorial)\n        openPage('tut' + state.tutorial + 'a', true, replace)\n    // Handle when player changed power while still in the tutorial\n    else if (phase == TUTORIAL_PHASES.changedPower &&\n             state.tutorial == TUTORIAL_PHASES.searchingPresence) {\n        state.tutorial = TUTORIAL_PHASES.searchingShrine\n        openPage('tut' + TUTORIAL_PHASES.changedPower + 'a', true, replace)\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tutorial.js","var map = {\"4_0_0\": {\"e\": [5, 0, 0], \"n\": [4, 1, 0], \"w\": [3, 0, 0]}, \"6_6_0\": {\"s\": [6, 5, 0], \"e\": [7, 6, 0], \"w\": [5, 6, 0]}, \"2_6_0\": {\"s\": [2, 5, 0], \"e\": [3, 6, 0]}, \"3_7_0\": {\"s\": [3, 6, 0], \"e\": [4, 7, 0]}, \"8_3_0\": {\"s\": [8, 2, 0], \"n\": [8, 4, 0]}, \"1_2_0\": {\"e\": [2, 2, 0], \"n\": [1, 3, 0], \"w\": [0, 2, 0]}, \"3_0_0\": {\"e\": [4, 0, 0], \"w\": [2, 0, 0]}, \"0_2_0\": {\"s\": [0, 1, 0], \"e\": [1, 2, 0]}, \"-1_7_0\": {\"e\": [0, 7, 0]}, \"3_4_0\": {\"e\": [4, 4, 0], \"w\": [2, 4, 0]}, \"6_7_0\": {\"e\": [7, 7, 0], \"w\": [5, 7, 0]}, \"6_4_0\": {\"s\": [6, 3, 0], \"e\": [7, 4, 0], \"n\": [6, 5, 0], \"w\": [5, 4, 0]}, \"1_8_0\": {\"s\": [1, 7, 0], \"w\": [0, 8, 0]}, \"1_0_0\": {\"n\": [1, 1, 0], \"w\": [0, 0, 0]}, \"8_6_0\": {\"s\": [8, 5, 0], \"w\": [7, 6, 0]}, \"6_3_0\": {\"s\": [6, 2, 0], \"n\": [6, 4, 0]}, \"4_4_0\": {\"s\": [4, 3, 0], \"e\": [5, 4, 0], \"n\": [4, 5, 0], \"w\": [3, 4, 0]}, \"8_8_0\": {\"s\": [8, 7, 0], \"n\": [8, 9, 0]}, \"6_5_0\": {\"s\": [6, 4, 0], \"n\": [6, 6, 0]}, \"5_1_0\": {\"s\": [5, 0, 0], \"n\": [5, 2, 0]}, \"3_2_0\": {\"s\": [3, 1, 0]}, \"0_7_0\": {\"n\": [0, 8, 0], \"w\": [-1, 7, 0]}, \"7_0_0\": {\"e\": [8, 0, 0], \"w\": [6, 0, 0]}, \"4_3_0\": {\"s\": [4, 2, 0], \"n\": [4, 4, 0]}, \"7_7_0\": {\"s\": [7, 6, 0], \"e\": [8, 7, 0], \"n\": [7, 8, 0], \"w\": [6, 7, 0]}, \"2_2_0\": {\"w\": [1, 2, 0]}, \"7_2_0\": {\"s\": [7, 1, 0], \"e\": [8, 2, 0], \"w\": [6, 2, 0]}, \"4_1_0\": {\"s\": [4, 0, 0]}, \"1_1_0\": {\"s\": [1, 0, 0], \"e\": [2, 1, 0], \"w\": [0, 1, 0]}, \"2_1_0\": {\"s\": [2, 0, 0], \"e\": [3, 1, 0], \"w\": [1, 1, 0]}, \"2_5_0\": {\"n\": [2, 6, 0], \"w\": [1, 5, 0]}, \"8_2_0\": {\"n\": [8, 3, 0], \"w\": [7, 2, 0]}, \"2_4_0\": {\"s\": [2, 3, 0], \"e\": [3, 4, 0], \"w\": [1, 4, 0]}, \"8_4_0\": {\"s\": [8, 3, 0], \"n\": [8, 5, 0], \"w\": [7, 4, 0]}, \"0_5_0\": {\"n\": [0, 6, 0]}, \"1_4_0\": {\"s\": [1, 3, 0], \"e\": [2, 4, 0], \"n\": [1, 5, 0], \"w\": [0, 4, 0]}, \"6_1_0\": {\"s\": [6, 0, 0], \"e\": [7, 1, 0]}, \"0_1_0\": {\"e\": [1, 1, 0], \"n\": [0, 2, 0]}, \"5_2_0\": {\"s\": [5, 1, 0], \"e\": [6, 2, 0], \"w\": [4, 2, 0]}, \"1_7_0\": {\"s\": [1, 6, 0], \"e\": [2, 7, 0], \"n\": [1, 8, 0]}, \"1_5_0\": {\"s\": [1, 4, 0], \"e\": [2, 5, 0]}, \"2_3_0\": {\"n\": [2, 4, 0], \"w\": [1, 3, 0]}, \"3_6_0\": {\"n\": [3, 7, 0], \"w\": [2, 6, 0]}, \"4_6_0\": {\"s\": [4, 5, 0], \"n\": [4, 7, 0]}, \"0_8_0\": {\"s\": [0, 7, 0], \"e\": [1, 8, 0]}, \"5_7_0\": {\"e\": [6, 7, 0], \"w\": [4, 7, 0]}, \"9_0_0\": {\"w\": [8, 0, 0]}, \"3_1_0\": {\"n\": [3, 2, 0], \"w\": [2, 1, 0]}, \"8_9_0\": {\"s\": [8, 8, 0]}, \"4_8_0\": {\"e\": [5, 8, 0], \"w\": [3, 8, 0]}, \"5_4_0\": {\"e\": [6, 4, 0], \"w\": [4, 4, 0]}, \"0_0_0\": {\"s\": [0, -1, 0], \"e\": [1, 0, 0]}, \"4_2_0\": {\"e\": [5, 2, 0], \"n\": [4, 3, 0]}, \"3_8_0\": {\"e\": [4, 8, 0], \"w\": [2, 8, 0]}, \"5_0_0\": {\"n\": [5, 1, 0], \"w\": [4, 0, 0]}, \"7_6_0\": {\"e\": [8, 6, 0], \"n\": [7, 7, 0], \"w\": [6, 6, 0]}, \"2_8_0\": {\"s\": [2, 7, 0], \"e\": [3, 8, 0]}, \"8_7_0\": {\"n\": [8, 8, 0], \"w\": [7, 7, 0]}, \"2_7_0\": {\"n\": [2, 8, 0], \"w\": [1, 7, 0]}, \"0_-1_0\": {\"n\": [0, 0, 0]}, \"0_4_0\": {\"s\": [0, 3, 0], \"e\": [1, 4, 0]}, \"6_0_0\": {\"e\": [7, 0, 0], \"n\": [6, 1, 0]}, \"4_7_0\": {\"s\": [4, 6, 0], \"e\": [5, 7, 0], \"w\": [3, 7, 0]}, \"7_4_0\": {\"e\": [8, 4, 0], \"w\": [6, 4, 0]}, \"1_6_0\": {\"n\": [1, 7, 0], \"w\": [0, 6, 0]}, \"6_2_0\": {\"e\": [7, 2, 0], \"n\": [6, 3, 0], \"w\": [5, 2, 0]}, \"5_8_0\": {\"e\": [6, 8, 0], \"w\": [4, 8, 0]}, \"0_3_0\": {\"e\": [1, 3, 0], \"n\": [0, 4, 0]}, \"2_0_0\": {\"e\": [3, 0, 0], \"n\": [2, 1, 0]}, \"5_6_0\": {\"e\": [6, 6, 0]}, \"7_8_0\": {\"s\": [7, 7, 0], \"w\": [6, 8, 0]}, \"8_1_0\": {\"w\": [7, 1, 0]}, \"4_5_0\": {\"s\": [4, 4, 0], \"n\": [4, 6, 0]}, \"0_6_0\": {\"s\": [0, 5, 0], \"e\": [1, 6, 0]}, \"8_0_0\": {\"e\": [9, 0, 0], \"w\": [7, 0, 0]}, \"8_5_0\": {\"s\": [8, 4, 0], \"n\": [8, 6, 0]}, \"1_3_0\": {\"s\": [1, 2, 0], \"e\": [2, 3, 0], \"n\": [1, 4, 0], \"w\": [0, 3, 0]}, \"7_1_0\": {\"e\": [8, 1, 0], \"n\": [7, 2, 0], \"w\": [6, 1, 0]}, \"6_8_0\": {\"e\": [7, 8, 0], \"w\": [5, 8, 0]}}\nexport default map\n\n\n\n// WEBPACK FOOTER //\n// ./assets/map/map.js","import {getBounds} from './utils.js'\nimport {state} from './store.js'\n\n\nexport function initKeyboardInput(fMove, fInteract) {\n    var cursors = ['UP', 'DOWN', 'LEFT', 'RIGHT', 'A']\n    cursors.map(\n        (key) => state.game.input.keyboard.addKey(\n            Phaser.Keyboard[key]).onDown.add(fMove, this, null, key))\n\n    state.game.input.keyboard.addKey(\n        Phaser.Keyboard.SPACEBAR).onDown.add(fInteract, this, null)\n}\n\nexport function initMouseInput(fMove, fInteract) {\n    state.onTap = (manager, pointer) => onTap(pointer, fMove, fInteract)\n}\n\nfunction onTap(pointer, fMove, fInteract) {\n    var x = pointer.x\n    var y = pointer.y\n\n    // The image is divided in 5 areas: top, bottom, left, right and\n    // center. A bigger p makes the center smaller and the other areas\n    // bigger but more narrow.\n    var p = 0.28\n    var [ix, iy, iw, ih] = getBounds(state.img)\n    var ty = iy + ih * p\n    var by = iy + ih * (1-p)\n    var lx = ix + iw * p\n    var rx = ix + iw * (1-p)\n    // var area = null\n\n    // Left, Right or Middle\n    if (y > ty && y < by) {\n        if (x < lx) fMove(null, 'LEFT') //area = 'left'\n        else if (x > rx) fMove(null, 'RIGHT') //area = 'right'\n        else fInteract() //area = 'center'\n        // Tor or Bottom\n    } else if (x > lx && x < rx) {\n        if (y < ty) fMove(null, 'UP') //area = 'top'\n        else if (y > by) fMove(null, 'DOWN') //area = 'bottom'\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/input.js","import {randInt} from './utils.js'\nimport {hideInterface, openPage} from './interface.js'\nimport {addEffect, loadVision} from './vision.js'\nimport {randomizePresencePositions} from './randPos.js'\nimport {changeDarkPresencePos, initPlayerPos} from './movement.js'\nimport {createPositionedAudios} from './createAudios.js'\nimport {touchedDarkPresence, stopSong, playSong, playButtonSound,\n        openTutWhenInPresence} from './game.js'\nimport {state} from './store.js'\nimport {setListenerPos} from './audio.js'\nimport {tweenPos} from './movement.js'\nimport {checkTutorial, TUTORIAL_PHASES} from './tutorial.js'\n\n\nvar darkPresencePhrases = [\n    'Raaaaarrrrr!!!!',\n    'Embrace Darkness!',\n    \"You can't win!\",\n    \"You can't hide!\",\n    \"You can't escape!\",\n    \"You are doomed!\",\n    'I found you.',\n    'Again?',\n    'Run faster next time.',\n    'Muhahahahah!',\n    'Unstoppable!',\n]\n\n\nfunction fadeGame(fadeTime=2000) {\n    state.state = 'finished'\n    addEffect(state, 0x000000, 1)\n    state.effect.alpha = 0\n    state.game.add.tween(state.effect)\n        .to({alpha: 1}, fadeTime, \"Linear\", true)\n}\n\n\nfunction wonLevel1() {\n    state.game.createdSounds.harp.play()\n    fadeOutPositionalSounds()\n    playSong('song')\n    fadeGame()\n    openPage('end1', false)\n}\n\nfunction introLevel1() {\n    if (state.playIntro) openPage('controls')\n    else startLevel()\n}\n\nfunction introLevel2() {\n    localStorage.lastLevel = 1\n    if (state.playIntro) {\n        hideInterface()\n        stopSong(1000)\n        state.game.createdSounds.darkSpell.play()\n        state.game.createdSounds.darkSpell.onStop.add(\n            function () {\n                state.game.createdSounds.darkSpell.onStop.removeAll()\n                randomizePresencePositions(state.position)\n                openPage('l2intro', false)\n                playSong('darkSong', 1000)\n            }\n        )\n    } else {\n        randomizePresencePositions(state.position)\n        startLevel()\n    }\n}\n\nfunction fadeOutPositionalSounds() {\n    // Move player up so should not hear positional sounds.\n    var oldPos = state.position\n    var posSetter = (pos) => setListenerPos(state.game.sound.context, pos)\n    tweenPos(oldPos, [oldPos[0], oldPos[1], 10], posSetter, 1000, state, 'Move')\n}\n\nfunction wonLevel2() {\n    state.state = 'finished'\n    fadeOutPositionalSounds()\n    state.game.createdSounds.end2.play()\n    state.game.createdSounds.end2.onStop.add(\n        function() {\n            state.game.createdSounds.end2.onStop.removeAll()\n            fadeGame(1000)\n            openPage('l2end1', false)\n            playSong('song')\n        }\n    )\n}\n\nfunction lostLevel2() {\n    state.game.createdSounds.rarr.play()\n    fadeGame(1000)\n    state.playIntro = false\n    openPage('lost2', false,\n             darkPresencePhrases[randInt(darkPresencePhrases.length)])\n    // game.sound.masterGain\n    fadeOutPositionalSounds()\n}\n\nfunction loadLevel(n) {\n    state.level = n\n    state.position = [4, 4, 0]\n    state.followed = []\n    state.power = []\n    if (n == 1) {\n        randomizePresencePositions(state.position)\n        state.won = wonLevel1\n        state.intro = introLevel1\n        state.tint = 0xffffff\n        state.filters = []\n        state.onMoved = openTutWhenInPresence\n    } else if (n == 2) {\n        state.won = wonLevel2\n        state.lost = lostLevel2\n        state.intro = introLevel2\n        state.tint = 0x202020\n        state.filters = [state.game.createdFilters.gray]\n        state.onMoved = () => changeDarkPresencePos(state.position,\n                                                    touchedDarkPresence)\n\n        // Disable tutorial\n        state.tutorial = 0\n    }\n}\n\nexport function startLevel(checkTut=true) {\n    hideInterface()\n    initPlayerPos()\n    createPositionedAudios()\n    state.state = 'starting'\n    loadVision(state)\n    if (checkTut) checkTutorial(TUTORIAL_PHASES.startingGame)\n}\n\nexport function pickLevel(n, playSound=true) {\n    loadLevel(n)\n    state.intro()\n    if(playSound) playButtonSound()\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/levels.js","import {posDirToText} from './utils.js'\nimport {move, initPlayerPos} from './movement.js'\nimport {hideLoadingScreen, openPage} from './interface.js'\nimport {initKeyboardInput, initMouseInput} from './input.js'\nimport {createCommonAudios} from './createAudios.js'\nimport {shrines, state} from './store.js'\nimport {interact, playButtonSound, onSetVision} from './game.js'\nimport {resize} from './vision.js'\nimport {pickLevel, startLevel} from './levels.js'\nimport {closeTutMsg} from './tutorial.js'\n\nexport function mainLoad() {\n    state.game.load.onLoadStart.add(function () {\n        console.log('Loading...')\n    }, this)\n\n    state.game.load.onLoadComplete.add(function () {\n        console.log('Done loading')\n        state.game.load.onLoadStart.removeAll()\n        state.game.load.onLoadComplete.removeAll()\n        mainInit()\n    }, this)\n\n    var firstImg = posDirToText(state.position, state.direction)\n    state.game.load.image(firstImg, `assets/map/${firstImg}.jpg`)\n\n    state.game.load.audio('button', ['assets/audio/button.ogg'])\n    state.game.load.audio('stream', ['assets/audio/stream_cold.ogg'])\n    state.game.load.audio('wind', ['assets/audio/wind.ogg'])\n    state.game.load.audio('fire', ['assets/audio/fire.ogg'])\n    state.game.load.audio('earth', ['assets/audio/earth.ogg'])\n    state.game.load.audio('magic', ['assets/audio/magic_slow.ogg'])\n    state.game.load.audio('magic_request', ['assets/audio/magic_request.ogg'])\n    state.game.load.audio('magic_arrived', ['assets/audio/magic_arrived.ogg'])\n    state.game.load.audio('magic_no', ['assets/audio/magic_no.ogg'])\n    state.game.load.audio('harp', ['assets/audio/harp.ogg'])\n    state.game.load.audio('harp_start', ['assets/audio/harp_start.ogg'])\n    state.game.load.audio('steps', ['assets/audio/steps.ogg'])\n    state.game.load.audio('dark_spell', ['assets/audio/dark_spell.ogg'])\n    state.game.load.audio('dark_presence', ['assets/audio/dark_presence.ogg'])\n    state.game.load.audio('dark_song', ['assets/audio/dark_song.ogg'])\n    state.game.load.audio('rarr', ['assets/audio/rarr.ogg'])\n    state.game.load.audio('end2', ['assets/audio/end2.ogg'])\n\n    state.game.load.script('gray', 'vendor/Gray.js')\n\n    state.game.load.start()\n}\n\n// First init called. Should be called only once, and before any level.\nfunction mainInit() {\n    hideLoadingScreen()\n\n    state.game.stage.backgroundColor = '#000000'\n    // Used to render some things always in front of others\n    state.layers = {\n        back: state.game.add.group(),\n        front: state.game.add.group(),\n    }\n\n    state.onSetVision = onSetVision\n    resize()\n\n    // initialize state presences (needed to later randomize them)\n    for (let k in shrines) {\n        state.presences[k] = {}\n    }\n\n    state.game.createdFilters = {gray: state.game.add.filter('Gray')}\n    createCommonAudios()\n    initKeyboardInput(move, interact)\n    initMouseInput(move, interact)\n\n    if (!localStorage.getItem('lastLevel')) {\n        // No level unlocked\n        pickLevel(1, false)\n\n        // TODO: only for debug, comment!\n        // startLevel()\n\n    } else {\n        // Level 2 unlocked\n        openPage('mainmenu', false)\n    }\n}\n\n// Exported functions, so interface can call them\nwindow.openPage = openPage\nwindow.pickLevel = pickLevel\nwindow.startLevel = startLevel\nwindow.closeTutMsg = closeTutMsg\nwindow.playButtonSound = playButtonSound\n\n\n\n// WEBPACK FOOTER //\n// ./src/loader.js","import map from '../assets/map/map.js'\nimport {randInt, textToPos, posToText} from './utils.js'\nimport {shrines, state} from './store.js'\n\n\nexport function randomizePresencePositions(player_pos) {\n    let possible_pos = {}\n    var array_pos = []\n\n    // No presence arrived yet\n    for (let p in state.presences) state.presences[p].arrived = false\n\n    // copy all map positions\n    for (let k in map) possible_pos[k] = true\n\n    // remove positions too close to player position\n    deleteCube(possible_pos, player_pos, 1)\n\n    // remove positions too close to shrines\n    for (let k in shrines) {\n        deleteCube(possible_pos, shrines[k].position, 2)\n    }\n\n    // place the dark presence\n    if (state.level == 2) {\n        array_pos = Object.keys(possible_pos)\n        state.darkPresence.position = textToPos(array_pos[randInt(array_pos.length)])\n    } else {\n        state.darkPresence.position = [100,100,100]\n    }\n\n    // place presences\n    // Placing presences may fail for when one is placed, the others\n    // have less space to be placed. Try again sometimes if failed.\n    var failed = false\n    var remainingAttempts = 10\n    do {\n        let remaining_pos = Object.assign({}, possible_pos)\n        for (let k in shrines) {\n            // convert to array so can random pick an index\n            array_pos = Object.keys(remaining_pos)\n            // check if still has positions to use\n            if (!array_pos.length) {\n                // no positions left, try again?\n                failed = true\n                console.log('ops...')\n            } else {\n                // random choice\n                var pos = textToPos(array_pos[randInt(array_pos.length)])\n                // set presence to pos\n                state.presences[k].position = pos\n                // remove positions too close to presence\n                deleteCube(remaining_pos, pos, 2)\n            }\n        }\n        remainingAttempts--\n    } while (failed && remainingAttempts)\n\n    if (failed) {\n        console.log('OMG! I failed! =O')\n    }\n}\n\nfunction deleteCube(obj, center, radius) {\n    var [xc, yc, zc] = center\n    for (let i=xc-radius; xc+radius>=i; i++) {\n        for (let j=yc-radius; yc+radius>=j; j++) {\n            for (let k=zc-radius; zc+radius>=k; k++) {\n                delete obj[posToText([i, j, k])]\n            }\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/randPos.js","module.exports = \"<p>But here comes the tricky part: you can't see the presences. You can only hear them.\\n    And that is also how you'll need to find out which presence belongs to which shrine.</p>\\n<p>One last tip: once you gain the power to communicate with a presence, you lose the power to communicate with the others.</p>\\n<a onClick=\\\"window.openPage('instructions')\\\">Back</a>\\n<a onClick=\\\"window.startLevel()\\\">Ok! Here I go!</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/cantsee.html\n// module id = 58\n// module chunks = 1","module.exports = \"<p>In this game you will need to be guided by sounds. So a headphone is <b>highly</b> recommended.</p>\\n<p>It's also <b>highly</b> recommended to play it using a recent Firefox or Chromium/Chrome. Firefox seems to play the sounds better.</p>\\n<p>Use the <b>arrow keys</b> to walk and the <b>spacebar</b> to interact.\\nOr click or touch the top/bottom parts of the screen to walk forward/backward and the left/right to rotate. Click/tap the middle of the screen to interact.</p>\\n<a onClick=\\\"window.openPage('instrorstart')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/controls.html\n// module id = 59\n// module chunks = 1","module.exports = \"<p>This is a free software game!</p>\\n<p>Made by: Andrés M. R. Martano</p>\\n<p>Based on works from many others.</p>\\n\\n<ul>\\n  <li>\\n    <a href=\\\"https://github.com/andresmrm/labyrimental\\\" target=\\\"_blank\\\">Check full credits and source repository.</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.openPage('mainmenu')\\\">Main menu</a>\\n  </li>\\n<ul>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/credits.html\n// module id = 60\n// module chunks = 1","module.exports = \"<p>Wow! Congratulations!</p>\\n<p>You helped the presenses! They are very grateful!</p>\\n<a onClick=\\\"window.pickLevel(2)\\\">Yay!</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/end1.html\n// module id = 61\n// module chunks = 1","module.exports = \"<p>This magic labyrinth has four elemental shrines, each inhabited by an elemental presence.\\nA powerfull spell casted nearby shaked the land, confusing the presences and spreading them around the labyrinth. Now they need your help to guide them back to their shrines.</p>\\n<a onClick=\\\"window.openPage('instructions')\\\">Next</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/history.html\n// module id = 62\n// module chunks = 1","module.exports = \"<p>Do you want to read the instructions or find out how to play by yourself?</p>\\n<a onClick=\\\"window.openPage('history')\\\">I don't want to guess how to play this weird game. Show me the instructions.</a>\\n<a onClick=\\\"window.startLevel(false)\\\">Challenge is my second name. Just start the game.</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/instrorstart.html\n// module id = 63\n// module chunks = 1","module.exports = \"<p>Before you can help one of the presences, you need to visit her shrine. There you will gain the power to communicate with her. After that you need to find the presence around the labyrinth, stay very close and interact, calling her to follow you. Then you can bring her back to her shrine.</p>\\n<a onClick=\\\"window.openPage('history')\\\">Back</a>\\n<a onClick=\\\"window.openPage('cantsee')\\\">Next</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/instructions.html\n// module id = 64\n// module chunks = 1","module.exports = \"<p>We did it! United the elemental presences could communicate with the dark presence and lessen her anger.</p>\\n<a onClick=\\\"window.openPage('l2end2')\\\">Great!</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2end1.html\n// module id = 65\n// module chunks = 1","module.exports = \"<p>It seems she's angry because of the powerfull spells casted recently and she thought you're the one responsible for them.</p>\\n<p>Maybe it's time to find out who is behind all this...</p>\\n<a onClick=\\\"window.openPage('l2end3')\\\">...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2end2.html\n// module id = 66\n// module chunks = 1","module.exports = \"<p>Continue?</p>\\n<a onClick=\\\"window.openPage('credits')\\\">End</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2end3.html\n// module id = 67\n// module chunks = 1","module.exports = \"<p>Uh oh...</p>\\n<a onClick=\\\"window.openPage('l2intro2')\\\">WHAT WAS THAT?</a>\\n<a onClick=\\\"window.openPage('l2intro2')\\\">Not again...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro.html\n// module id = 68\n// module chunks = 1","module.exports = \"<p>It seems a powerfull spell was casted again. But this time, it unleashed a... dark presence.</p>\\n<p>What are we going to do now?</p>\\n<a onClick=\\\"window.openPage('l2intro3')\\\">Hey! You're the one supposed to tell me that!</a>\\n<a onClick=\\\"window.startLevel()\\\">Just stay out of the way and I'll solve it quick.</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro2.html\n// module id = 69\n// module chunks = 1","module.exports = \"<p>Hum... Ok... Don't panic.</p>\\n<p>After the powerfull spell was casted again, the four elemental presences should be spread across the labyrinth once again. But maybe, if you can unite them, they can do something about it.</p>\\n<a onClick=\\\"window.openPage('l2intro3a')\\\">They can't even find the way back to their shines!</a>\\n<a onClick=\\\"window.openPage('l2intro4')\\\">Ok...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro3.html\n// module id = 70\n// module chunks = 1","module.exports = \"<p>Hey! Don't underestimate the presences! Besides, I have no other idea...</p>\\n<a onClick=\\\"window.openPage('l2intro4')\\\">Great...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro3a.html\n// module id = 71\n// module chunks = 1","module.exports = \"<p>Ok, so first you'll need to enter each of the four shines again, to gain the hability to communicate with each presence. This time, given the circustances, you should be able to accumulate the power to communicate with all of them at the same time. Then find them around the labyrinth.</p>\\n<a onClick=\\\"window.openPage('l2intro5')\\\">...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro4.html\n// module id = 72\n// module chunks = 1","module.exports = \"<p>Be cautious: don't face the dark presence before you have all the four elemental presences with you. Like the others, you can't see the dark presence, but I'm sure you'll know when she is close. Run. And don't forget: she can pass through walls and she seems ANGRY.</p>\\n<a onClick=\\\"window.startLevel()\\\">...</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/l2intro5.html\n// module id = 73\n// module chunks = 1","module.exports = \"<p>{{}}</p>\\n<ul>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(2)\\\">Restart</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.openPage('mainmenu')\\\">Main menu</a>\\n  </li>\\n<ul>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/lost2.html\n// module id = 74\n// module chunks = 1","module.exports = \"<p>Select a level:</p>\\n<ul>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(1)\\\">Level 1</a>\\n  </li>\\n  <li>\\n    <a onClick=\\\"window.pickLevel(2)\\\">Level 2</a>\\n  </li>\\n<ul>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/mainmenu.html\n// module id = 75\n// module chunks = 1","module.exports = \"<p>So, first you need to find a shrine...</p>\\n<a onClick=\\\"window.openPage('tut1b')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut1a.html\n// module id = 76\n// module chunks = 1","module.exports = \"<p>Use the arrow keys or click on the borders of the screen to move.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut1b.html\n// module id = 77\n// module chunks = 1","module.exports = \"<p>Great! You found the {{}} shrine!</p>\\n<a onClick=\\\"window.openPage('tut2b', true, '{{}}')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2a.html\n// module id = 78\n// module chunks = 1","module.exports = \"<p>Now you can communicate with the {{}} presence. But first you need to find it.</p>\\n<a onClick=\\\"window.openPage('tut2c')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2b.html\n// module id = 79\n// module chunks = 1","module.exports = \"<p>Search the labyrinth for a sound similar to the one you hear here.</p>\\n<a onClick=\\\"window.openPage('tut2d')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2c.html\n// module id = 80\n// module chunks = 1","module.exports = \"<p>You'll need to get <b>very</b> close to it.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2d.html\n// module id = 81\n// module chunks = 1","module.exports = \"<p>You entered the {{}} shrine.</p>\\n<a onClick=\\\"window.openPage('tut2xb', true, '{{}}')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2xa.html\n// module id = 82\n// module chunks = 1","module.exports = \"<p>You lost the power to communicate with the previous presence...</p>\\n<a onClick=\\\"window.openPage('tut2xc', true, '{{}}')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2xb.html\n// module id = 83\n// module chunks = 1","module.exports = \"<p>But you can now communicate with the {{}} presence.</p>\\n<a onClick=\\\"window.openPage('tut2c')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut2xc.html\n// module id = 84\n// module chunks = 1","module.exports = \"<p>Can you hear that? You're very close to the {{}} presence.</p>\\n<a onClick=\\\"window.openPage('tut3b')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut3a.html\n// module id = 85\n// module chunks = 1","module.exports = \"<p>Press the space bar or click on the middle of the screen to call her.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut3b.html\n// module id = 86\n// module chunks = 1","module.exports = \"<p>Great! The {{}} presence heard your call and is now following you.</p>\\n<a onClick=\\\"window.openPage('tut4b', true, '{{}}')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut4a.html\n// module id = 87\n// module chunks = 1","module.exports = \"<p>Now you need to bring her to the {{}} shrine.</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut4b.html\n// module id = 88\n// module chunks = 1","module.exports = \"<p>Well done! The {{}} presence is happy back to her shrine!</p>\\n<a onClick=\\\"window.openPage('tut5b')\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut5a.html\n// module id = 89\n// module chunks = 1","module.exports = \"<p>Now you need to do the same for the other three presences. Good luck!</p>\\n<a onClick=\\\"window.closeTutMsg()\\\">Ok</a>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/tut5b.html\n// module id = 90\n// module chunks = 1","var map = {\n\t\"./cantsee.html\": 58,\n\t\"./controls.html\": 59,\n\t\"./credits.html\": 60,\n\t\"./end1.html\": 61,\n\t\"./history.html\": 62,\n\t\"./instrorstart.html\": 63,\n\t\"./instructions.html\": 64,\n\t\"./l2end1.html\": 65,\n\t\"./l2end2.html\": 66,\n\t\"./l2end3.html\": 67,\n\t\"./l2intro.html\": 68,\n\t\"./l2intro2.html\": 69,\n\t\"./l2intro3.html\": 70,\n\t\"./l2intro3a.html\": 71,\n\t\"./l2intro4.html\": 72,\n\t\"./l2intro5.html\": 73,\n\t\"./lost2.html\": 74,\n\t\"./mainmenu.html\": 75,\n\t\"./tut1a.html\": 76,\n\t\"./tut1b.html\": 77,\n\t\"./tut2a.html\": 78,\n\t\"./tut2b.html\": 79,\n\t\"./tut2c.html\": 80,\n\t\"./tut2d.html\": 81,\n\t\"./tut2xa.html\": 82,\n\t\"./tut2xb.html\": 83,\n\t\"./tut2xc.html\": 84,\n\t\"./tut3a.html\": 85,\n\t\"./tut3b.html\": 86,\n\t\"./tut4a.html\": 87,\n\t\"./tut4b.html\": 88,\n\t\"./tut5a.html\": 89,\n\t\"./tut5b.html\": 90\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\treturn map[req] || (function() { throw new Error(\"Cannot find module '\" + req + \"'.\") }());\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 92;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages ^\\.\\/.*$\n// module id = 92\n// module chunks = 1"],"sourceRoot":""}